//Bluewave Charts 1.0.7
if(!bluewave)var bluewave={};if(bluewave.charts||(bluewave.charts={}),bluewave.charts.PieChart=function(t,e){var d,c,h,a=Math.max,l=Number.MAX_VALUE,r=Math.abs,n=Math.min,o=Math.PI,s=Math.round,u=this,i={pieKey:"key",pieValue:"value",pieCutout:0,pieSort:!1,pieSortDir:"ascending",maximumSlices:null,showLabels:!0,labelOffset:100,showTooltip:!1,tooltipClass:"tooltip",showSum:!1,lineColor:"#777",borderColor:"#777",extendLines:!1,colors:["#6699cc","#f8f8f8"],otherColor:"#b8b8b8",animationSteps:1500};this.setConfig=function(t){e=t?f(t,i):i},this.getTooltipLabel=function(t,e){return u.getKeyLabel(t.key,t)+"<br/>"+u.getValueLabel(t.value)},this.getKeyLabel=function(t,e){return t},this.getValueLabel=function(t,e){var a=bluewave.chart.utils.parseFloat(t);return isNaN(a)?t:L(a,2)},this.getCenterLabel=function(t){var e=0;t.forEach(t=>{e+=t.value});var a="";return 1e3<=e&&(e=s(e/1e3),a="k",1e3<=e&&(e=s(e/1e3),a="M",1e3<=e&&(e=s(e/1e3),a="B"),1e3<=e&&(e=s(e/1e3),a="T"))),e+a},this.getNumSlices=function(){return h},this.clear=function(){g(),h=0},this.update=function(t,a,l){g(),0<arguments.length&&(1===arguments.length||("string"==typeof a?(e.pieKey=a,e.pieValue=l):(u.setConfig(arguments[0]),t=arguments[1]))),x(u,function(){p(t)})},this.getSVG=function(){return d};var g=function(){c&&(c.node().innerHTML="",c.attr("transform",null))},p=function(t){if(b(t)&&b(t[0])&&(t=t[0]),e.pieKey&&e.pieValue){var a=C(t,e.pieKey,e.pieValue),l=(e.pieSort+"").toLowerCase(),i=(e.pieSortDir+"").toLowerCase(),s=parseFloat(e.maximumSlices);"key"===l?a.sort(function(t,e){return y(t.key,e.key,i)}):"value"===l?a.sort(function(t,e){return y(t.value,e.value,i)}):s=null,h=a.length;var g=!1;if(!isNaN(s)&&0<s&&s<h){var p;if("descending"===i?(p=a.slice(s),a=a.slice(0,s)):(p=a.slice(0,h-s),a=a.slice(h-s,h)),!0===e.showOther){var f=0;p.forEach(function(t){var e=t.value;isNaN(e)||(f+=e)}),a.push({key:"Other",value:f}),g=!0}h=a.length}var k=0;"undefined"!=typeof e.piePadding&&(k=e.piePadding*o/180);var L=d3.pie().value(function(t){return t.value}).sort(null).padAngle(k);a=L(a);var T=javaxt.dhtml.utils.getRect(d.node()),F=T.width,S=T.height,E=c.append("g");E.attr("transform","translate("+F/2+","+S/2+")");var R=n(F,S)/2,D=parseFloat(e.pieCutout);isNaN(D)&&(D=.65);var B,P=R*D,V=parseInt(e.animationSteps+"");!isNaN(V)&&50<V?B=!0:(V=0,B=!1);var M;!0===e.showTooltip&&(M=A(e.tooltipClass));var O=function(t,e){if(!B){if(M){var a=u.getTooltipLabel(e.data);M.html(a).show()}d3.select(this).transition().duration(100).attr("opacity","0.8")}},Y=function(t){B||M&&M.style("top",t.clientY+"px").style("left",t.clientX+20+"px")},G=function(){B||(M&&M.hide(),d3.select(this).transition().duration(100).attr("opacity","1"))},z=e.colors,K=g?h-1:h;K>e.colors.length&&(z=v(K,z)),g&&z.push(e.otherColor);var I=d3.arc().innerRadius(P).outerRadius(R),j=E.append("g");j.attr("name","pie"),j.selectAll("*").data(a).enter().append("path").attr("d",I).attr("fill",function(t,e){return z[e]}).attr("stroke",e.borderColor).style("stroke-width","1px").on("mouseover",O).on("mousemove",Y).on("mouseleave",G);var N=!0===e.showSum;if(N&&0<D){var X=u.getCenterLabel(a);if(X){var H=E.append("text").attr("text-anchor","middle").attr("font-size","4em").attr("y",20);H.text(X)}}var W,U=!0===e.showLabels;if(U&&"undefined"!==a[0].data.key&&!isNaN(a[0].value)){W=E.append("g"),W.attr("name","labels");var _=parseFloat(e.labelOffset);(isNaN(_)||0>_)&&(_=100);var q=0;if(100<_)q=R*(_/100);else{var Z=R-P;q=P+Z*(_/100)}var w=!0===e.extendLines;w&&110>=_&&(w=!1);var J=d3.arc().innerRadius(P).outerRadius(P+90*(R-P)/50),Q=d3.arc().innerRadius(R).outerRadius(R+2*(q-R)),$=parseFloat(e.labelPadding+"");isNaN($)&&($=5);var tt,et=d3.arc().innerRadius(R).outerRadius(R+2*(q-R)+$),at=!1;let t=[];var lt=E.append("g");lt.attr("name","lines"),lt.selectAll("*").data(a).enter().append("polyline").attr("opacity","0").attr("stroke",e.lineColor).style("fill","none").attr("stroke-width",.7).attr("points",function(e){var i=J.centroid(e),a=Q.centroid(e),r=[i,a],n=e.startAngle+(e.endAngle-e.startAngle)/2,s=!!(n<o);if(w){var d=q*(s?1:-1),h=a[1];r.push([d,h]),t.push([d+(s?$:-$),h])}else{var u=et.centroid(e),c=[i,u];t.push(c[c.length-1])}return r}),110<_&&lt.selectAll("polyline").attr("opacity","1"),W.selectAll("*").data(a).enter().append("text").attr("class","label").text(function(t){return u.getKeyLabel(t.data.key,t.data)}).attr("transform",function(e,a){return"translate("+t[a]+")"}).style("text-anchor",function(t,e){if(e==h-1&&!w)return"middle";var a=t.startAngle+(t.endAngle-t.startAngle)/2;return a<o?"start":"end"});var it=m(c);if(it.width=1.1*(it.maxX-it.minX),it.height=1.1*(it.maxY-it.minY),it.width>F||it.height>S){var rt,nt,ot,st=it.width-F,dt=it.height-S;st>dt?(rt=F/it.width,1<rt&&(rt=1+(1-rt)),nt=F/2,ot=S/2):dt>st&&(rt=S/it.height,nt=F/2,ot=it.height);var ct=0;W.selectAll("text").each(function(t,e){if(0===e){var a=javaxt.dhtml.utils.getRect(this);ct=a.height}}),E.attr("transform","translate("+nt+","+ot+") scale("+rt+")");var ht=0;if(W.selectAll("text").each(function(t,e){if(0===e){var a=javaxt.dhtml.utils.getRect(this);ht=a.height}}),ht<ct){var ut=ct/ht;W.selectAll("text").each(function(t,e){var a=this.getAttribute("transform");this.setAttribute("transform",a+" scale("+ut+")")})}var ot=T.y,nt=T.x,gt=T.x+T.width/2,pt=T.y+T.height/2,T=javaxt.dhtml.utils.getRect(E.node()),yt=(S-T.height)/2,mt=(F-T.width)/2,ft=T.x+T.width/2,xt=T.y+T.height/2,mt=gt-ft,yt=pt-xt;0>yt&&(yt=0),0>mt&&(mt=0),E.attr("transform","translate("+(F/2+mt)+","+(S/2+yt)+") scale("+rt+")")}}if(V){var bt=0;V/=2;var kt=j.selectAll("path"),vt=d3.arc().innerRadius(0).outerRadius(0);if(kt.attr("d",vt),kt.transition().delay(function(t,e){var a=r(t.startAngle-t.endAngle)+t.padAngle,l=a/(2*o),i=bt,n=l*V;return bt+=n,i}).duration(function(t){var e=r(t.startAngle-t.endAngle)+t.padAngle,a=e/(2*o);return a*V}).ease(d3.easeLinear).attrTween("d",function(e){var a=d3.interpolate(e.startAngle,e.endAngle);return function(l){return e.endAngle=a(l),I(e)}}),U){var At=W.selectAll("text"),wt=lt.selectAll("polyline");wt.attr("opacity",0),At.attr("opacity",0);var Ct=function(t,e){return e*V/h};110<_&&wt.transition().delay(Ct).duration(V).attr("opacity",1),At.transition().delay(Ct).duration(V).attr("opacity",1)}setTimeout(()=>{B=!1},bt)}}},y=function(t,e,a){var l="string"==typeof t&&"string"==typeof e;return a=(a+"").toLowerCase(),"descending"===a?l?e.localeCompare(t):e-t:l?t.localeCompare(e):t-e},m=function(t){var e=l,i=0,r=l,o=0;return t.selectAll("*").each(function(){var t=javaxt.dhtml.utils.getRect(d3.select(this).node());e=n(t.left,e),i=a(t.right,i),r=n(t.top,r),o=a(t.bottom,o)}),{minX:e,maxX:i,minY:r,maxY:o}},f=javaxt.dhtml.utils.merge,x=bluewave.chart.utils.checkSVG,b=bluewave.chart.utils.isArray,k=bluewave.chart.utils.initChart,v=bluewave.chart.utils.getColorRange,A=bluewave.chart.utils.createTooltip,C=bluewave.chart.utils.createKeyValueDataset,L=javaxt.dhtml.utils.round;(function(){u.setConfig(e),k(t,function(t,e){d=t,c=e})})()},!bluewave)var bluewave={};if(bluewave.charts||(bluewave.charts={}),bluewave.charts.TreeMapChart=function(t,e){var l,i,r,n,o,a=Math.max,s=this,d={key:"name",value:"value",shape:"square",groupBy:null,colors:d3.schemeCategory10,keyLabel:!0,valueLabel:!0,groupLabel:!0,showTooltip:!1,style:{keyLabel:{"font-size":"14px",color:"#fff"},valueLabel:{"font-size":"11px",color:"#fff"},groupLabel:{"font-size":"16px"}}},c=function(){s.setConfig(e),C(t,function(t,e){l=t,i=e})};this.setConfig=function(t){e=t?v(t,d):d,r=!(!0!==e.showTooltip)&&L()},this.getTooltipLabel=function(t,e){var a=t.name;return t.group&&0<t.group.length&&(a+=" ("+t.group+")"),a+"<br/>"+s.getValueLabel(t.value)},this.getKeyLabel=function(t,e){return t},this.getValueLabel=function(t,e){var a=bluewave.chart.utils.parseFloat(t);return isNaN(a)?t:w(a,2)},this.onClick=function(t,e){},this.onDblClick=function(t,e){},this.clear=function(){i&&i.selectAll("*").remove(),o=null},this.update=function(t,e,a){s.clear();0===arguments.length||(Array.isArray(t)?(a=e,e=t):s.setConfig(t),A(s,function(){g(e),a&&a()}))},this.getSVG=function(){return l},this.getGroup=function(t){var e=[];return o&&o.each(function(a){if(a.data.group===t){var l=d3.select(this).node();e.push({cell:l,rect:l,data:a.data})}}),e},this.getGroups=function(){var t={};for(var e in o&&o.each(function(e){var a=e.data.group;t[a]=[]}),t)t.hasOwnProperty(e)&&(t[e]=s.getGroup(e));return t};var h=(t,e,a)=>{if(!t)return null;if(Array.isArray(t))for(const l of t){const t=h(l,e,a);if(t)return l}else{if(t.hasOwnProperty(e)&&t[e]===a)return t;for(const l of Object.keys(t))if("object"==typeof t[l]){const i=h(t[l],e,a);if(null!==i&&"undefined"!=typeof i)return i}return null}},u=function(t){var a=[],l=null;if(null!==e.groupBy){var l=(e.groupBy+"").trim();if(0<l.length){var r={};t.forEach(t=>{var e=t[l];r[e]=!0}),a=Object.keys(r)}else l=null}var n=[];t.forEach(t=>{var a=t[e.value],l=bluewave.chart.utils.parseFloat(a);0==l||isNaN(l)||(t[e.value]=l,n.push(t))}),n.length!==t.length&&(t=n);var o={children:[],name:"all"};if(null!==l){a.forEach(a=>{o.children.push({name:a,children:[],colname:"level2"});var i=h(o.children,"name",a);t.forEach(t=>{var r=t[e.key],n=t[l],o=t[e.value];if(a===n)if("undefined"!=typeof h(i.children,"name",r)){var s=h(i.children,"name",r);s.value+=o}else i.children.push({name:r,group:n,colname:"level3",value:o})})});var s={};o.children.forEach(t=>{var e=0;t.children.forEach(t=>{e+=t.value}),s[t.name]=e});var c=[];for(var u in s)if(s.hasOwnProperty(u)){var g=s[u];0==g&&c.push(u)}for(;0<c.length;)for(var p=c.shift(),y=0;y<o.children.length;y++)if(o.children[y].name==p){o.children.splice(y,1);break}o.children.sort((t,e)=>s[e.name]-s[t.name]),a=[],o.children.forEach(t=>{a.push(t.name)})}else{o.children.push({name:"",children:[],colname:"level2"});var m=h(o.children,"name","");t.forEach(t=>{var a=t[e.key],l=t[e.value],i="";if("undefined"!=typeof h(m.children,"name",a)){var r=h(m.children,"name",a);r.value+=l}else m.children.push({name:a,group:i,colname:"level3",value:l})})}var f=d3.hierarchy(o).sum(t=>t.value),x=f.leaves(),b=f.descendants().filter(t=>1==t.depth);return{root:f,leaves:x,descendants:b,groupNames:a,children:o.children}},g=function(t){t=u(t);var a=t.groupNames;("undefined"==typeof a||null===a)&&(a=[]);var r=e.colors,o=a.length;o>r.length&&(r=F(o,r)),n=function(t){for(var e=r[0],l=0;l<a.length;l++)if(a[l]===t){e=r[l];break}return e};var s=javaxt.dhtml.utils.getRect(l.node());"circle"===e.shape?y(t,s):p(t,s)},p=function(t,l){var r=0;if(e.groupLabel&&1<t.descendants.length){var d=i.append("text").attr("x",0).attr("y",0).attr("text-anchor","start").text("Iq");T(d,e.style.groupLabel),r=d.node().getBBox().height,d.remove()}i.attr("class","treemap"),d3.treemap().size([l.width,l.height]).paddingTop(r).paddingInner(0)(t.root);var c=function(e,a){var l=h(t.children,"name",a),i=[];l.children.forEach(t=>{i.push(t.value)});var r=d3.scaleLinear().domain([d3.min(i),d3.max(i)]).range([.5,1]);return r(e)};o=i.selectAll("rect").data(t.leaves).enter().append("rect").attr("x",t=>t.x0).attr("y",t=>t.y0).attr("width",t=>t.x1-t.x0).attr("height",t=>t.y1-t.y0).style("stroke","white").style("fill",t=>n(t.parent.data.name)).style("opacity",t=>c(t.data.value,t.data.group)).on("mouseover",f).on("mousemove",x).on("mouseleave",b).on("click",function(t,e){s.onClick(this,e.data)}).on("dblclick",function(t,e){s.onDblClick(this,e.data)});var u=[],g=3;if(e.keyLabel&&o.each(function(a){var l=s.getKeyLabel(a.data.name,a.data),r=d3.select(this).node(),n=r.getBBox(),o=n.x+n.width,d=n.y+n.height,c=i.append("text").attr("x",n.x+2).attr("y",n.y).attr("text-anchor","start").attr("class","label").text(l);T(c,e.style.keyLabel);var h=c.node().getBBox();c.attr("y",n.y+h.height/2+g),h=c.node().getBBox();var p=h.x+h.width,y=h.y+h.height,m=0;p>o?c.remove():y>d?c.remove():m=h.y+h.height,u.push(m)}),e.valueLabel&&o.each(function(a,l){var r=u[l];if(!(0===r&&e.keyLabel)){var n=s.getValueLabel(a.data.value,a.data),o=d3.select(this).node(),d=o.getBBox(),c=d.x+d.width,h=d.y+d.height,g=i.append("text").attr("x",d.x+2).attr("y",d.y).attr("text-anchor","start").attr("class","value label").text(n);T(g,e.style.valueLabel);var p=g.node().getBBox();g.attr("y",r+p.height/2),p=g.node().getBBox();var y=p.x+p.width,m=p.y+p.height;y>c?g.remove():m>h&&g.remove()}}),e.groupLabel&&0<r){var p=i.selectAll("titles").data(t.descendants).enter().append("text").attr("class","group label").attr("x",t=>t.x0+1).attr("y",t=>t.y0+r-g).text(t=>t.data.name).attr("fill",t=>n(t.data.name)),y=[];p.each(function(t,l){T(this,e.style.groupLabel);var i=this.getBBox(),r=i.x+i.width,n=0;t.children.forEach(t=>{n=a(t.x1,n)}),r>n&&y.push(d3.select(this))}),y.forEach(t=>{t.remove()})}},y=function(t,a){var l=a.width,r=a.height,d=Math.min(l,r)/2-5,c=[l/2,r/2],h=i.append("g").attr("transform","translate("+c+")").attr("class","voronoi treemap"),u=m(60,d);h.append("path").attr("transform","translate("+[-d,-d]+")").attr("d","M"+u.join(",")+"Z"),d3.voronoiTreemap().clip(u)(t.root),o=h.append("g").attr("transform","translate("+[-d,-d]+")").selectAll("path").data(t.leaves).enter().append("path").attr("d",function(t){return"M"+t.polygon.join(",")+"z"}).style("fill",t=>n(t.parent.data.name)).style("stroke","white").on("mouseover",f).on("mousemove",x).on("mouseleave",b).on("click",function(t,e){s.onClick(this,e.data)}).on("dblclick",function(t,e){s.onDblClick(this,e.data)});var g,p;(e.keyLabel||e.valueLabel)&&(g=h.append("g").attr("transform","translate("+[-d,-d]+")"),p=[],o.each(function(t){var e=d3.polygonCentroid(t.polygon);p.push(e)}));var y=[];e.keyLabel&&o.each(function(a,l){var i=s.getKeyLabel(a.data.name,a.data),r=p[l],n=g.append("text").attr("x",r[0]).attr("y",r[1]).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("class","label").text(i);T(n,e.style.keyLabel);var o=0;if(k(n,a))n.remove();else{var d=n.node().getBBox();o=d.y+d.height+4}y.push(o)}),e.valueLabel&&o.each(function(a,l){var i=y[l];if(!(0===i&&e.keyLabel)){var r=s.getValueLabel(a.data.value,a.data),n=p[l],o=g.append("text").attr("x",n[0]).attr("y",i).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("class","value label").text(r);T(o,e.style.valueLabel);var d=o.node().getBBox();d.y<i&&o.attr("y",i),k(o,a)&&o.remove()}})},m=function(t,e){for(var l=2*Math.PI/t,r=[],n=0,o=0;o<t;o++,n+=l)r.push([e+e*Math.cos(n),e+e*Math.sin(n)]);return r},f=function(t,e){if(r){var a=o.nodes().indexOf(this),l=s.getTooltipLabel(e.data,a);r.html(l).show()}d3.select(this).transition().duration(100).attr("opacity","0.8")},x=function(t){r&&r.style("top",t.clientY+"px").style("left",t.clientX+20+"px")},b=function(){r&&r.hide(),d3.select(this).transition().duration(100).attr("opacity","1")},k=function(e,l){var r=e.node().getBBox(),t=[[r.x,r.y],[r.x+r.width,r.y],[r.x+r.width,r.y+r.height],[r.x,r.y+r.height],[r.x,r.y]],n=bluewave.chart.utils.clipPolygon(l.polygon,t),o=!0;if(!n)o=!1;else if(5===n.length){for(var s=0,d=0;d<n.length;d++){var c=n[d],h=t[d];c[0]===h[0]&&c[1]===h[1]&&s++}5===s&&(o=!1)}return o},v=javaxt.dhtml.utils.merge,A=bluewave.chart.utils.checkSVG,w=javaxt.dhtml.utils.round,C=bluewave.chart.utils.initChart,L=bluewave.chart.utils.createTooltip,T=bluewave.chart.utils.setStyle,F=bluewave.chart.utils.getColorRange;c()},!bluewave)var bluewave={};if(bluewave.charts||(bluewave.charts={}),bluewave.charts.BarChart=function(t,e){var a,l,i,n,o,s,d,c=this,r={layout:"vertical",animationSteps:1500,stackValues:!1,borderRadius:0,colors:d3.schemeCategory10,showTooltip:!1,sort:!1},h=[],u=function(){c.setConfig(e),k(t,function(t,e){a=t,l=e})};this.setConfig=function(t){e=t?f(t,r):r},this.getBarColor=function(t,a,l){var i=e.colors,r=e["barColor"+a];return r||(r=i[a%i.length],e["barColor"+a]=r),r},this.getTooltipLabel=function(t,a,l){var i=c.getKeyLabel(t.key,t)+"<br/>"+c.getValueLabel(t.value),r=e.group;if(r&&(r=(r+"").trim(),0<r.length))try{i=r+": "+l[0][e.group]+"<br/>"+i}catch(t){}return i},this.getKeyLabel=function(t,a){var l,i,r=e.layout;return"horizontal"===r?(i=e.xAxis,l=e.yAxis):(l=e.xAxis,i=e.yAxis),l+": "+t},this.getValueLabel=function(t,a){var l,i,r=e.layout;"horizontal"===r?(i=e.xAxis,l=e.yAxis):(l=e.xAxis,i=e.yAxis);var n=bluewave.chart.utils.parseFloat(t);return isNaN(n)||(t=T(n,2)),i+": "+t},this.getXAxis=function(){return s},this.getYAxis=function(){return d},this.clear=function(){l&&l.selectAll("*").remove()},this.addLine=function(t,e,a,l){h.push({line:t,data:e,xAxis:a+"",yAxis:l+""})},this.update=function(t,e){c.clear(),1<arguments.length?c.setConfig(t):e=arguments[0],b(c,function(){g(e)})},this.getSVG=function(){return a};var g=function(t){var u=e,y=javaxt.dhtml.utils.getRect(a.node()),f=y.width,x=y.height,b=x,k=f;i=l.append("g"),i.attr("width",f).attr("height",x);var T=u.layout,F=!0===u.stackValues,S=parseInt(u.borderRadius);(isNaN(S)||0>S)&&(S=0);var E,R,D=u.barType;if("histogram"===D?(E=u.values,R=E):"horizontal"===T?(R=u.xAxis,E=u.yAxis):(E=u.xAxis,R=u.yAxis),null!==E&&void 0!==E&&null!==R&&void 0!==R){var B=t,P=d3.merge(B),V=L(P,E,R);if(0<h.length){let t=d3.max(V,t=>bluewave.chart.utils.parseFloat(t.value));h.forEach(function(e){let a=e.data,l=e.xAxis,i=e.yAxis,r=d3.max(a,t=>bluewave.chart.utils.parseFloat(t[i]));r>t&&(V=L(a,l,i))})}var M=u.group;if(M&&(M=(M+"").trim(),0===M.length&&(M=null)),M){B=[];var O=d3.group(P,t=>t[M]);for(var Y of O.keys()){var G=O.get(Y),z=G[0][M],K={};for(var Y in G.forEach(t=>{var e=t[E],a=bluewave.chart.utils.parseFloat(t[R]);isNaN(a)&&(a=0),K.hasOwnProperty(e)?K[e]+=a:K[e]=a}),G=[],K)if(K.hasOwnProperty(Y)){var I=K[Y],j={};j[M]=z,j[E]=Y,j[R]=I,G.push(j)}B.push(G)}}else F=!1;var G=[];for(let t=0;t<B.length;t++){var N=0<t?t+1:"";let e=u[`xAxis${t+1}`],a=u[`yAxis${t+1}`];if(e&&a||M||"histogram"===D||!(0<t)){u.hasOwnProperty(`xAxis${t+1}`)&&u.hasOwnProperty(`yAxis${t+1}`)&&(E=e,R=a);var X=L(B[t],E,R);G.push(X)}}F?V=L(d3.merge(G),"key","value"):(V=[],G.forEach(t=>{V.push(...t)}));var H=(e.sort+"").toLowerCase();("ascending"===H||"descending"===H)&&V.sort(function(t,e){return d3[H](t.value,e.value)});var W,U,_,q;"histogram"===D?(_="key",q="key","vertical"===T?(W="Frequency",U=u.xAxis):"horizontal"===T&&(W=u.xAxis,U="Frequency")):"vertical"===T?(_="key",q="value",W=u.yAxis,U=u.xAxis):"horizontal"===T&&(_="value",q="key",W=u.xAxis,U=u.yAxis);var Z=v(i,k,b,_,q,V,null,u,"barChart"),J=Z.margin;if(J){var Q=J.left,$=J.right,tt=J.top,et=J.bottom;(0<tt||0<et||0<Q||0<$)&&(b-=tt+et,k-=Q+$,i.selectAll("*").remove(),i.attr("transform","translate("+Q+","+tt+")"),Z=v(i,k,b,_,q,V,null,u,"barChart")),J={top:tt,right:$,bottom:et,left:Q}}n=Z.x,o=Z.y,s=Z.xAxis,d=Z.yAxis,x-=J.top+J.bottom,f-=J.left+J.right;var at;S&&(at=i.append("defs"));var lt=i.append("g"),it={};for(let t=0;t<B.length;t++){var rt,nt,ot,st,dt=lt.append("g"),ct=(Math.random()+1).toString(36).substring(7),X=G[t];if(F){let t=C(X[0].key);"date"===t&&(t="string"),rt=function(e){return"date"===t?n(new Date(e.key)):n(e.key)},nt=function(t){var e=t.key,a=t.value;it[e]||(it[e]=0);var l=bluewave.chart.utils.parseFloat(a);return it[e]+=l,o(it[e])};let e=function(t){var e=bluewave.chart.utils.parseFloat(t.value);return o(e)};ot=function(t){return n.bandwidth?n.bandwidth():rt(t)},st=function(t){return o.bandwidth?o.bandwidth():x-e(t)}}else if("histogram"===D){let t=parseInt(u.binWidth);(isNaN(t)||1>t)&&(t=10),n.nice();var ht=d3.histogram().value(function(t){return t.key}).domain(n.domain()).thresholds(n.ticks(t)),ut=ht(X),gt=d3.max(ut,t=>t.length),pt=d3.scaleLinear().range("vertical"===T?[x,0]:[0,f]);pt.domain([0,gt]),"vertical"===T?p(n,pt,b):"horizontal"===T&&p(pt,o,b),rt=function(t){return"vertical"===T?n(t.x0):0},nt=function(t){return"vertical"===T?pt(t.length):x-n(t.x1)/(f/x)},ot=function(t){return"vertical"===T?n(t.x1)-n(t.x0)-.5:pt(t.length)},st=function(t){return"vertical"===T?x-pt(t.length):(n(t.x1)-n(t.x0))/(f/x)-.5}}else{let e=C(X[0].key);"date"===e&&(e="string");var yt=function(t){return"date"===e?n(new Date(t.key)):n(t.key)},mt=function(t){var e=bluewave.chart.utils.parseFloat(t.value);return o(e)};o.bandwidth||n.bandwidth?"vertical"===u.layout?(ot=function(t){return M||1<B.length?n.bandwidth?n.bandwidth()/B.length:yt(t):n.bandwidth?n.bandwidth():yt(t)},st=function(t){return o.bandwidth?o.bandwidth():x-mt(t)},rt=function(e){var a=ot(e),l=n.bandwidth?yt(e):0;return M||1<B.length?l+a*t:yt(e)},nt=mt):"horizontal"===u.layout&&(rt=function(){return 0},nt=function(e){var a=o.bandwidth?o.bandwidth()/B.length:x-o(e.key),l=o.bandwidth?o(e.key):0;return M?l+a*t:o(e.key)},ot=function(t){return n.bandwidth?n.bandwidth():n(t.value)},st=function(t){return M?o.bandwidth?o.bandwidth()/B.length:x-o(t.value):o.bandwidth?o.bandwidth():x-o(t.value)}):"vertical"===u.layout?(rt=function(e){var a=yt(e)-f/X.length/2;if(M){var l=f/X.length,i=l/B.length;a+=i*t}return a},nt=mt,st=function(t){return x-mt(t)},ot=function(t){var e=f/X.length;return M?e/B.length:e-5}):"horizontal"===u.layout&&(rt=function(t){return 0},nt=function(t){return"date"===e?o(new Date(t.key))-x/X.length/2:o(t.key)-x/X.length/2},st=function(t){return x/X.length-5},ot=function(t){return n(t.value)})}S&&(F?(console.log(t),S=0):at.selectAll("*").data(X).enter().append("clipPath").attr("id",function(t,e,a){return"round-corner-"+ct+e}).append("rect").attr("rx",S).attr("ry",S).attr("x",function(t){return"vertical"===u.layout?rt(t):"horizontal"===u.layout?rt(t)-S:void 0}).attr("y",nt).attr("height",function(t){return"vertical"===u.layout?st(t)+S:"horizontal"===u.layout?st(t):void 0}).attr("width",function(t){return"vertical"===u.layout?ot(t):"horizontal"===u.layout?ot(t)+S:void 0})),dt.selectAll("*").data(X).enter().append("rect").attr("x",rt).attr("y",nt).attr("height",st).attr("width",ot).attr("clip-path",function(t,e,a){return S?"url(#round-corner-"+ct+e+")":""}).attr("barID",function(e,a,l){return t})}var ft=function(t,e){for(var a=[],l=B[t],i=0;i<l.length;i++)l[i][E]===e.key&&a.push(l[i]);return a},xt=lt.selectAll("rect"),bt={};xt.each(function(t,e){let a=d3.select(this),l=parseInt(a.attr("barID"));var i=ft(l,t),r=c.getBarColor(t,l,i),n=bt[l];isNaN(n)&&(n=bluewave.chart.utils.parseFloat(u["fillOpacity"+l]),(isNaN(n)||0>n||1<n)&&(n=1),u["fillOpacity"+l]=n,bt[l]=n),a.attr("fill",r),a.attr("opacity",n)});var kt=u.animationSteps;if(!isNaN(kt)&&50<kt){var vt;S?(vt=at.selectAll("rect"),vt.attr("yInitial",function(){return this.getAttribute("y")}).attr("heightInitial",function(){return this.getAttribute("height")}).attr("widthInitial",function(){return this.getAttribute("width")})):xt.attr("yInitial",function(){return this.getAttribute("y")}).attr("heightInitial",function(){return this.getAttribute("height")}).attr("widthInitial",function(){return this.getAttribute("width")}),"vertical"===T?vt?(vt.attr("y",x).attr("height",S),vt.transition().duration(kt).attr("y",function(){return parseFloat(this.getAttribute("yInitial"))}).attr("height",function(){return parseFloat(this.getAttribute("heightInitial"))})):(xt.attr("y",x).attr("height",0),xt.transition().duration(kt).attr("y",function(){return parseFloat(this.getAttribute("yInitial"))}).attr("height",function(){return parseFloat(this.getAttribute("heightInitial"))})):"horizontal"===T&&(vt?(vt.attr("width",0),vt.transition().duration(kt).attr("width",function(){return parseFloat(this.getAttribute("widthInitial"))})):(xt.attr("x",0).attr("width",0),xt.transition().duration(kt).attr("width",function(){return parseFloat(this.getAttribute("widthInitial"))})))}var At;!0===e.showTooltip&&(At=A());var wt=function(t,e){let a=d3.select(this);if(At){let t=parseInt(a.attr("barID"));var l=ft(t,e),i=c.getTooltipLabel(e,t,l);At.html(i).show()}var r=parseFloat(a.attr("opacity"));r-=.2*r,a.transition().duration(100).attr("opacity",r)},Ct=function(t){At&&At.style("top",t.clientY+"px").style("left",t.clientX+20+"px")},Lt=function(){At&&At.hide();let t=d3.select(this),e=parseInt(t.attr("barID"));var a=bt[e];t.transition().duration(100).attr("opacity",a)},Tt=function(){kt||(kt=0),setTimeout(function(){xt.on("mouseover",wt),xt.on("mousemove",Ct),xt.on("mouseleave",Lt)},kt)},Ft=function(t){var e=[];return xt.each(function(){e.push(this)}),e};if(xt.on("click",function(t,e){var a=parseInt(d3.select(this).attr("barID"));c.onClick(this,a,e)}),xt.on("dblclick",function(t,e){c.onDblClick(this,Ft(this))}),h.forEach(function(t){m(t)}),u.xGrid||u.yGrid){var St=!1;!0===u.xGrid&&(St=bluewave.chart.utils.parseFloat(u.xTicks));var Et=!1;!0===u.yGrid&&(Et=bluewave.chart.utils.parseFloat(u.yTicks)),w(i,n,o,b,k,St,Et)}Tt()}};this.onClick=function(t,e){},this.onDblClick=function(t,e){};var p=function(t,e,a){s&&s.selectAll("*").remove(),d&&d.selectAll("*").remove(),s=i.append("g").attr("transform","translate(0,"+a+")").call(d3.axisBottom(t)),s.selectAll("text").attr("transform","translate(-10,0)rotate(-45)").style("text-anchor","end"),d=i.append("g").call(d3.axisLeft(e))},m=function(t){var e,a=t.xAxis,l=t.yAxis;t.line.getConfig&&(e=t.line.getConfig()),e||(e=new bluewave.chart.Line().getConfig());let r=e.color,s=e.style,d=e.width,c=e.opacity,h=e.smoothing;var u=function(t){var e=n.bandwidth()/2;return"date"===m?n(new Date(t.key))+e:n(t.key)+e},g=function(t){var e=bluewave.chart.utils.parseFloat(t.value);return o(e)},p=function(){return h&&"none"!==h?d3.line().x(u).y(g).curve(d3[h]):d3.line().x(u).y(g)},y=L(t.data,a,l);let m=C(y[0].key);"date"==m&&(m="string"),i.append("path").datum(y).attr("fill","none").attr("stroke",r).attr("stroke-width",d).attr("opacity",c).attr("stroke-dasharray",function(t){if("dashed"===s)return"5, 5";return"dotted"===s?"0, 5":void 0}).attr("stroke-linecap",function(t){if("dotted"===s)return"round"}).attr("d",p())},f=javaxt.dhtml.utils.merge,b=bluewave.chart.utils.checkSVG,k=bluewave.chart.utils.initChart,v=bluewave.chart.utils.drawAxes,A=bluewave.chart.utils.createTooltip,w=bluewave.chart.utils.drawGridlines,C=bluewave.chart.utils.getType,L=bluewave.chart.utils.createKeyValueDataset,T=javaxt.dhtml.utils.round;u()},!bluewave)var bluewave={};if(bluewave.chart||(bluewave.chart={}),bluewave.chart.utils={initChart:function(t,e,a){var l,i=function(){var t=l.append("g");e&&e.apply(a,[l,t])};if(t instanceof d3.selection)l=t,i();else if(t instanceof SVGElement)l=d3.select(t),i();else{var r=d3.select(t).append("div").classed("svg-container",!0),l=r.append("svg").attr("preserveAspectRatio","xMidYMid meet").attr("height","100%").attr("width","100%").attr("viewBox","0 0 600 400").classed("svg-content-responsive",!0);bluewave.chart.utils.onRender(t,function(){setTimeout(function(){var e=t.offsetWidth,a=t.offsetHeight;l.attr("viewBox",`0 0 ${e} ${a}`),i()},200)})}},checkSVG:function(t,e){var a=t.getSVG();if(!a){var l,i=function(){var a=t.getSVG();a?(clearTimeout(l),e&&e.apply(t,[a])):l=setTimeout(i,100)};l=setTimeout(i,100)}else e&&e.apply(t,[a])},onRender:function(t,e){var a=t.offsetWidth;if(0===a||isNaN(a)){var l,i=function(){var a=t.offsetWidth;0===a||isNaN(a)?l=setTimeout(i,100):(clearTimeout(l),e&&e.apply(t,[t]))};l=setTimeout(i,100)}else e&&e.apply(t,[t])},drawGridlines:function(t,e,a,l,i,r,n){var o=[];if(!0===r||!isNaN(r)){var s=t.append("g").attr("class","vertical grid").attr("transform","translate(0,"+l+")");o.push(s);var d;d=!0===r?d3.axisBottom(e).tickSize(-l).tickFormat(""):d3.axisBottom(e).ticks(r).tickSize(-l).tickFormat(""),s.call(d)}if(!0===n||!isNaN(n)){var s=t.append("g").attr("class","horizontal grid");o.push(s);var d;d=!0===n?d3.axisLeft(a).tickSize(-i).tickFormat(""):d3.axisLeft(a).ticks(n).tickSize(-i).tickFormat(""),s.call(d)}o.forEach(t=>{t.node().removeAttribute("font-size"),t.node().removeAttribute("font-family"),t.selectAll("g").each(function(t,e){this.removeAttribute("class"),this.removeAttribute("opacity")})})},drawLabels:function(t,e,a,l,i,r,n,o){if(e){var s=l;r&&(s+=r.bottom-2),t.append("text").attr("x",i/2).attr("y",s).style("text-anchor","middle").text(n)}if(a){var d=0;r&&(d-=r.left),t.append("text").attr("transform","rotate(-90)").attr("x",0-l/2).attr("y",d).attr("dy","1em").style("text-anchor","middle").text(o)}},drawAxes:function(e,a,l,n,o,s,d,c,h){var u=Math.max,g=Number.MAX_VALUE,p=Math.min;c||(c={});var m=bluewave.chart.utils.getType,f=bluewave.chart.utils.getScale,b=bluewave.chart.utils.getDateFormat,v=[],A=[];s.forEach(t=>{v.push(t[n]),A.push(t[o])});var w=m(v),C=m(A);if("barChart"==h&&("date"==w&&(w="string"),"date"==C&&(C="string"),"number"==w||"currency"==w)){var L=c.layout;if("vertical"===L){var T=g,F=0;v.forEach(t=>{var e=bluewave.chart.utils.parseFloat(t);T=p(e,T),F=u(e,F)}),c.xMin=T}}var S=f(n,w,[0,a],s,d,null,c.xMin,c.xMax),E=S.scale,x=S.band,R="logarithmic"===c.scaling?"logarithmic":"linear";S=f(o,C,[l,0],s,d,R,c.yMin,c.yMax);var D=S.scale;D.nice&&(D=D.nice());var B,P=S.band,V=function(t,e){var a,l,i,r,n="";t.selectAll("text").each(function(t,o,s){var d=s[o].textContent;if("number"===e){if(isNaN(a)&&(a=0,s.forEach(function(t){var e=0==bluewave.chart.utils.parseFloat(t.textContent)%1;e&&a++})),a==s.length){var c=d3.format(",");s[o].textContent=c(d)}}else if("date"===e){l||(l=[],i={},r={},s.forEach(function(t){var e=new Date(t.textContent);l.push(e);var a=e.getFullYear(),n=e.getDate();i[a+""]=!0,r[n+""]=!0}),i=Object.keys(i),r=Object.keys(r));var h=!0;if(1<i.length){if(1==r.length){var c=d3.timeFormat("%Y");if(d=c(t),d===n)d="";else if(n=d,0===o&&o+2<l.length){var u=l[o+1],g=l[o+2];u.getFullYear()+""!=d&&u.getFullYear()==g.getFullYear()&&(d="")}h=!1}}else if(1==r.length){var c=d3.timeFormat("%b");d=c(t)}h&&(0===d.indexOf("0")&&(d=d.substring(1)),d=d.replaceAll("/0","/")),s[o].textContent=d}})},M=function(t,e){var a;if("date"===t)a=d3.timeFormat(b(e));else if("number"===t){var l=1;a=d3.format(".1f")}return a},O=function(t,e=0){var a=[];return t.selectAll("text").each(function(t,l){var i=javaxt.dhtml.utils.getRect(this);a.push({left:i.x-e,right:i.x+i.width+e,top:i.y-e,bottom:i.y+i.height+e})}),a},Y=function(t){for(var e,a=!1,l=0;l<t.length;l++){e=t[l];for(var r=0;r<t.length;r++)if(r!==l){var n=t[r];if(javaxt.dhtml.utils.intersects(e,n)){a=!0;break}}if(a)break}return a},G=M(w,c.xFormat);!0===c.xTicks||!1===c.xTicks||(B=c.xTicks);var z=e.append("g").attr("transform","translate(0,"+l+")");if(!1===c.xTicks)z.call(d3.axisBottom(E).ticks(B).tickFormat("")),z.selectAll("line").each(function(t,e){this.setAttribute("y2","0"),this.setAttribute("opacity","0")}),z.selectAll("path").each(function(t,e){var t=this.getAttribute("d");t=t.substring(t.indexOf("H")),t=t.substring(0,t.indexOf("V")),this.setAttribute("d","M0,0"+t),this.setAttribute("opacity","0")});else{z.call(d3.axisBottom(E).ticks(B).tickFormat(G)),c.xFormat||V(z,w);var K=parseFloat(c.labelPadding+"");isNaN(K)&&(K=3);var I=O(z,K),N=Y(I);if(N){z.selectAll("text").attr("transform","translate(-10,0)rotate(-45)").style("text-anchor","end");for(var X={},H=0;H<I.length;H++)I[H]=bluewave.chart.utils.rotateBox(I[H],315);for(var W,H=I.length-1;0<=H;H--){W=I[H];for(var U=H-1;0<=U;U--){for(var _,q=I[U],Z=!1,J=0;J<q.length;J++)if(_=q[J],bluewave.chart.utils.pointInPoly(_,W)){Z=!0;break}if(Z)X[U+""]=!0,H--;else break}}z.selectAll("text").attr("visibility",function(t,e){return X[e+""]?"hidden":"visible"})}}var Q,$=M(C,c.yFormat);!0===c.yTicks||!1===c.yTicks||(Q=c.yTicks);var tt="right"===c.yAxisAlign?"Right":"Left",et=e.append("g");if(!1===c.yTicks)et.call("linear"===R?d3["axis"+tt](D).tickFormat(""):d3["axis"+tt](D).ticks(10,",").tickFormat("")),et.selectAll("line").each(function(t,e){this.setAttribute("x2","0"),this.setAttribute("opacity","0")}),et.selectAll("path").each(function(t,e){var t=this.getAttribute("d");t="M0"+t.substring(t.indexOf(",")),t=t.substring(0,t.indexOf("H"))+"H0V0",this.setAttribute("d",t),this.setAttribute("opacity","0")});else{et.call("linear"===R?d3["axis"+tt](D).ticks(Q).tickFormat($):d3["axis"+tt](D).ticks(10,",").tickFormat($)),c.yFormat||V(et,C);var at=et.selectAll("text");let t=at.size();var lt=O(et),it=Y(lt,-1);it&&at.attr("visibility",function(e,a){return t%2?0==(a+1)%2?"hidden":"visible":0==a%2?"hidden":"visible"})}[z,et].forEach(t=>{t.node().setAttribute("class","axis"),t.node().removeAttribute("font-size"),t.node().removeAttribute("font-family"),t.selectAll("g").each(function(t,e){this.removeAttribute("opacity"),this.removeAttribute("class")}),t.selectAll("text").each(function(t,e){this.setAttribute("class","label")}),t.selectAll("line").each(function(t,e){this.setAttribute("class","tick")})});var rt=javaxt.dhtml.utils.getRect(z.node()),nt=javaxt.dhtml.utils.getRect(et.node()),ot=g,st=0,dt=g,ct=0;z.selectAll("line").each(function(t,e){var a=javaxt.dhtml.utils.getRect(this);ot=p(a.x,ot),st=u(a.x+a.width,st)}),et.selectAll("line").each(function(t,e){var a=javaxt.dhtml.utils.getRect(this);dt=p(a.y,dt),ct=u(a.y+a.height,ct)}),et.selectAll("path").each(function(t,e){var a=javaxt.dhtml.utils.getRect(this);0<a.width&&(ot=p(a.x,ot),st=u(a.x+a.width,st)),dt=p(a.y,dt),ct=u(a.y+a.height,ct)});var ht,ut;if("Right"==tt){ht=ot>rt.left?ot-rt.left:0,ut=nt.width;var gt=0;z.selectAll("path").each(function(t,e){var a=javaxt.dhtml.utils.getRect(this);gt=u(a.width,gt)}),et.attr("transform","translate("+gt+", 0)")}else ht=rt.left-ot,0>ht&&(ht=0),ht=u(nt.width,ht),ut=rt.right-st,0>ut&&(ut=0);var pt=dt-nt.top,yt=u(nt.bottom-ct,rt.height),mt=16,ft=c.xLabel;if(ft){var xt=z.append("text").attr("x",(rt.right-rt.left)/2).attr("y",yt+mt).attr("class","chart-axis-label").style("text-anchor","middle").text(ft),bt=javaxt.dhtml.utils.getRect(xt.node());yt+=bt.height+mt}var kt=c.yLabel;if(kt){var vt=-(nt.width+mt);"Right"===tt&&(vt=-vt);var At=-(nt.height/2),xt=et.append("text").attr("transform","rotate(-90)").attr("x",At).attr("y",vt).attr("class","chart-axis-label").style("text-anchor","middle").text(kt),bt=javaxt.dhtml.utils.getRect(xt.node());"Right"===tt?ut=u(ut+(bt.width+mt),ut):ht=u(ht+(bt.width+mt),ht)}return{xAxis:z,yAxis:et,xBand:x,yBand:P,x:E,y:D,margin:{top:pt,right:ut,bottom:yt,left:ht}}},getScale:function(t,e,a,l,i,r,n,o){let s,d;switch(e){case"string":s=d3.scaleBand().domain(l.map(function(e){return e[t]})).range(a).padding(.2);break;case"date":var c=[new Date(d3.min(l,e=>e[t])),new Date(d3.max(l,e=>e[t]))];l.map(e=>(e[t]=new Date(e[t]),e)),s=d3.scaleTime().domain(c).rangeRound(a),d=d3.scaleBand().domain(d3.timeDay.range(...s.domain())).rangeRound(a).padding(.2);break;default:var h,u;if(!i){var g=d3.extent(l,function(e){return bluewave.chart.utils.parseFloat(e[t])});h=0,u=g[1]}else h=d3.min(i,function(e){return bluewave.chart.utils.parseFloat(e[t])}),u=d3.max(l,function(e){return bluewave.chart.utils.parseFloat(e[t])});h===u&&(u=h+1),r||(r="linear"),"linear"===r?(0<h&&(h=0),!isNaN(n)&&(h=n),!isNaN(o)&&(u=o),s=d3.scaleLinear().domain([h,u])):"logarithmic"==r&&(1>h&&(h=1),s=d3.scaleLog().domain([h,u+1])),s.range(a)}return{scale:s,band:d}},extendScale:function(t,e,a,l){var r,n,i=Math.ceil,o=t.scale.domain(),s=bluewave.chart.utils.getType;if(l||(l=s(o[0])),a||(a=1),"date"===l){let t=o[1],l=o[0],i=t.getTime(),s=t-l,d=s*a,c=new Date(i+d);r=d3.scaleTime().domain([l,c]).rangeRound(e),n=d3.scaleBand().domain(d3.timeDay.range(...r.domain())).rangeRound(e).padding(.2)}else if("string"===l){let t=i(o.length*a),l="",n=o;for(let e=0;e<t;e++)l+=" ",n.push(l);r=d3.scaleBand().domain(n).range(e).padding(.2)}else{let t=[o[0],o[1]*(a+1)];r=d3.scaleLinear().domain(t).range(e)}return{scale:r,band:n}},reDrawAxes:function(t,e,a,l,i,r){e&&(e.remove(),e=t.append("g").attr("transform","translate(0,"+r+")").call(d3.axisBottom(a))),l&&(l.remove(),l=t.append("g").call(d3.axisLeft(i)))},getType:function(t){var e=bluewave.chart.utils.getType,a=bluewave.chart.utils.isDate,l=bluewave.chart.utils.isNumber,i=bluewave.chart.utils.isCurrency,r=bluewave.chart.utils.isArray;if(r(t)){var n=t.length,o=0,d=0,c=0,h=0,u=0,g=0;return t.forEach(function(t){if(null===t||"undefined"==typeof t)return void u++;var a=e(t);switch(a){case"string":var l=(t+"").trim();(0===l.length||"null"===l)&&u++,h++;break;case"number":o++;break;case"currency":d++;break;case"date":c++;break;default:g++}}),c===n||c+u===n?"date":o===n||o+u===n?"number":d===n||d+u===n||d+o+u===n?"currency":h===n||h+u===n?"string":null}switch(typeof t){case"string":return l(t)?"number":a(t)?"date":i(t)?"currency":"string";break;case"number":return"number";break;case"object":if(a(t))return"date";break;default:}return null},parseFloat:function(t){if("number"==typeof t)return t;if("string"==typeof t){if(bluewave.chart.utils.isDate(t))return parseFloat(null);if(bluewave.chart.utils.isCurrency(t))return bluewave.chart.utils.parseCurrency(t)}return parseFloat(t)},parseCurrency:function(t){for(var e=t.split(" "),a=0;a<e.length;a++)if(t=e[a].trim(),bluewave.chart.utils.isCurrency(t)){var l=1;0==t.indexOf("-")&&(l=-1),0==t.indexOf("(")&&t.lastIndexOf(")")==t.length-1&&(l=-1);var r=t.indexOf("."),o=t.indexOf(",");0>r&&(r=0),0>o&&(o=0);var s;return s=r>o&&r?r:!!(o>r&&o)&&o,!1==s?parseFloat(t.replace(/[^\d]/g,""))*l:parseFloat(t.substr(0,s).replace(/[^\d]/g,"")+"."+t.substr(s+1,t.length).replace(/[^0-9]/,""))*l}return parseFloat(null)},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},isNumber:function(t){return!("number"!=typeof t)||("string"!=typeof t&&(t=""+t),!isNaN(parseFloat(t))&&!isNaN(t-0))},isCurrency:function(e){if(bluewave.chart.utils.isNumber(e))return!0;if(bluewave.chart.utils.isDate(e))return!1;"string"!=typeof e&&(e=""+e);var a=e.replace(/[-+,.a-zA-Z0-9() ]+/g,"");if(a=a.replace(bluewave.chart.utils.getCurrencyRegEx(),""),0<a.length)return!1;for(var l,r=0,o=e.split(" "),s=0;s<o.length;s++){if(l=o[s].trim(),0<l.length){(0==l.indexOf("-")||0==l.indexOf("+"))&&(l=l.substring(1).trim()),0==l.indexOf("(")&&l.lastIndexOf(")")==l.length-1&&(l=l.substring(1,l.length-1).trim());var d=/^\d/.test(l),c=/[0-9]+$/.test(l);if(d&&c){var a=l.replace(/[^0-9,.]+/g,"");return a===l}if(d||c)return bluewave.chart.utils.isNumber(e.replace(/[^0-9.-]+/g,""));r++}if(3<r)return!1}return!1},isDate:function(t){return!!(t instanceof Date)||!bluewave.chart.utils.isNumber(t)&&("string"!=typeof t&&(t+=""),t=t.trim(),!t.match(/^[-+]/))&&!t.match(bluewave.chart.utils.getCurrencyRegEx())&&(t=Date.parse(t),!isNaN(t)&&0!==t)},getCurrencyRegEx:function(){return /[\$\xA2-\xA5\u058F\u060B\u09F2\u09F3\u09FB\u0AF1\u0BF9\u0E3F\u17DB\u20A0-\u20BD\uA838\uFDFC\uFE69\uFF04\uFFE0\uFFE1\uFFE5\uFFE6]/},getDateFormat:function(t){var e="%m/%d/%Y";return t&&(e=t,e=e.replace("YYYY","%Y"),e=e.replace("YY","%y"),e=e.replace("MMMM","%B"),e=e.replace("MM","%m"),e=e.replace("M","%m"),e=e.replace("DD","%d"),e=e.replace("D","%d"),e=e.replace("A","%p"),e=e.replace("dddd","%A"),e=e.replace("HH","%H"),e=e.replace("h","%I"),e=e.replace("mm","%M"),e=e.replace("ss","%S")),e},mixColors:function(t,e,a){if("undefined"!=typeof chroma)return chroma.mix(t,e,a,"rgb").hex();var l=d3.scaleLinear().domain([0,1]).range([t,e]);return d3.color(l(a)).formatHex()},getColorRange:function(t,e){if("undefined"!=typeof chroma)return chroma.scale(e).colors(t);for(var a,l=[-1],r=2/(e.length-1),n=0;n<e.length-2;n++)a=l[l.length-1],l.push(a+r);l.push(1);for(var o=d3.scaleLinear().domain(l).range(e),s=[],n=0;n<t;n++){var d=n/(t-1),c=2*d-1,h=d3.color(o(c)).formatHex();s.push(h)}return s},getNaturalBreaks:function(t,e){var a=Math.min;function l(t,e){var a,r,n=[],o=[],s=0;for(a=0;a<t.length+1;a++){var d=[],c=[];for(r=0;r<e+1;r++)d.push(0),c.push(0);n.push(d),o.push(c)}for(a=1;a<e+1;a++)for(n[1][a]=1,o[1][a]=0,r=2;r<t.length+1;r++)o[r][a]=1/0;for(var h=2;h<t.length+1;h++){for(var u=0,g=0,p=0,y=0,f=1;f<h+1;f++){var x=h-f+1,b=t[x-1];if(p++,u+=b,g+=b*b,s=g-u*u/p,y=x-1,0!==y)for(r=2;r<e+1;r++)o[h][r]>=s+o[y][r-1]&&(n[h][r]=x,o[h][r]=s+o[y][r-1])}n[h][1]=1,o[h][1]=s}return{lower_class_limits:n,variance_combinations:o}}function i(t,e,a){var l=t.length-1,i=[],r=a;for(i[a]=t[t.length-1],i[0]=t[0];1<r;)i[r-1]=t[e[l][r]-2],l=e[l][r]-1,r--;return i}var r=[...new Set(t)].length;if(e=a(e,r-1),e>t.length)return null;t=t.slice().sort(function(t,e){return t-e});var n=l(t,e),o=n.lower_class_limits,s=[];try{s=i(t,o,e),s=[...new Set(s)]}catch(t){console.log(t)}return s},createTooltip:function(t){var e=bluewave.chart.utils.Tooltip,a=javaxt.dhtml.utils.getHighestElements;return e||(e=bluewave.chart.utils.Tooltip=d3.select(document.body).append("div").style("position","absolute").style("opacity",0).style("top",0).style("left",0).style("display","none").attr("class",t?t:"tooltip"),e.show=function(){var t=a(),l=t.zIndex;t.contains(e.node())||l++,e.style("opacity",1).style("display","block").style("z-index",l)},e.hide=function(){e.style("opacity",0).style("display","none")}),e},setStyle:function(t,e){if(null!==t&&0!==t&&null!==e){var a=t.nodeName;if(!a&&t.node&&(t=t.node(),a=t.nodeName),"string"==typeof e||e instanceof String)t.setAttribute("class",e);else for(var l in e){var i=e[l];"text"===a&&"color"===l&&(l="fill"),t.setAttribute(l,i)}}},rotateBox:function(t,e){var a=Math.sin,l=Math.cos,i=Math.round,r=e*Math.PI/180,n=function(t,e,r){var n=i(l(r)*(e[0]-t[0])-a(r)*(e[1]-t[1])+t[0]),o=i(a(r)*(e[0]-t[0])+l(r)*(e[1]-t[1])+t[1]);return[n,o]},o=[t.right,t.top];return[o,n(o,[t.right,t.bottom],r),n(o,[t.left,t.bottom],r),n(o,[t.left,t.top],r)]},pointInPoly:function(t,e){for(var a=t[0],l=t[1],r=!1,n=0,o=e.length-1;n<e.length;o=n++){var s=e[n][0],d=e[n][1],c=e[o][0],h=e[o][1],u=d>l!=h>l&&a<(c-s)*(l-d)/(h-d)+s;u&&(r=!r)}return r},clipPolygon:function(t,e){function l([t,e],[a,l],[i,r]){return(i-a)*(e-l)<(r-l)*(t-a)}function i([t,e],[a,l],[i,r],[n,o]){const s=a-t,d=l-e,c=n-i,h=o-r,u=(s*(r-e)-d*(i-t))/(d*c-s*h);return[i+u*c,r+u*h]}function r(t){const[e,a]=t[0],[l,i]=t[t.length-1];return e===l&&a===i}const o=r(e),s=t.length-r(t);e=e.slice();for(let r,n,c,d=0,h=t[s-1];d<s;++d){const a=e.slice(),s=a.length-o;e.length=0,r=t[d],n=a[s-1];for(let t=0;t<s;++t)c=a[t],l(c,h,r)?(!l(n,h,r)&&e.push(i(n,c,h,r)),e.push(c)):l(n,h,r)&&e.push(i(n,c,h,r)),n=c;o&&e.push(e[0]),h=r}return e.length?e:null},createKeyValueDataset:function(e,a,l){var i=[],r=[];e.forEach(t=>{var e=t[a],n=t[l];i.push({key:e+"",value:n}),r.push(n)});var n=bluewave.chart.utils.getType(r);if("number"===n||"currency"===n){i.forEach(t=>{var e=bluewave.chart.utils.parseFloat(t.value);isNaN(e)&&(e=0),t.value=e});var t={};for(var a in i.forEach((e,a)=>{var l=i[a].value;t.hasOwnProperty(e.key)?t[e.key]+=l:t[e.key]=l}),i=[],t)if(t.hasOwnProperty(a)){var o=t[a];i.push({key:a,value:o})}}return i}},!bluewave)var bluewave={};if(bluewave.charts||(bluewave.charts={}),bluewave.charts.ScatterChart=function(t,e){var r,n,o,s,c,h,a=Math.max,l=Number.MAX_VALUE,i=Math.min,u=this,d={pointColor:"#6699cc",pointRadius:7,pointOpacity:.8,pointLabels:!1,showRegLine:!1,showTooltip:!1},g=function(){u.setConfig(e),w(t,function(t,e){r=t,n=e})};this.setConfig=function(t){e=t?b(t,d):d},this.clear=function(){n&&n.selectAll("*").remove()},this.update=function(t,a,l){u.clear(),0<arguments.length&&(1===arguments.length||("string"==typeof a?(e.xAxis=a,e.yAxis=l):(u.setConfig(arguments[0]),t=arguments[1]))),A(u,function(){p(t)})},this.getSVG=function(){return r},this.getPointLabel=function(t){return""},this.getPointRadius=function(t){return e.pointRadius},this.getPointColor=function(t){return e.pointColor},this.getPointOpacity=function(t){return e.pointOpacity},this.getTooltipLabel=function(t){return e.xAxis+": "+t[e.xAxis]+"<br/>"+e.yAxis+": "+t[e.yAxis]},this.onClick=function(t,e,a){};var p=function(t){var l=javaxt.dhtml.utils.getRect(r.node()),i=l.width,d=l.height,g=d,p=i;o=n.append("g"),o.attr("width",i).attr("height",d);let y=e.xAxis,x=e.yAxis;if(!y||!x)return;if(v(t)&&v(t[0])&&(t=t[0]),0==t.length)return;var b=T(o,p,g,y,x,t,null,e);c=b.x,h=b.y;var k=b.margin;if(k){var A=k.left,w=k.right,L=k.top,F=k.bottom,B=0;if(e.pointLabels){var P=o.append("g");P.selectAll("text").data(t).enter().append("text").attr("x",0).attr("y",0).attr("text-anchor","start").attr("font-size",10).text(function(t){return u.getPointLabel(t)});var V=P.node().getBBox();P.remove(),B=a(V.width,B)}(0<L||0<F||0<A||0<w)&&(g-=L+F,p-=A+w,o.selectAll("*").remove(),o.attr("transform","translate("+A+","+L+")"),b=T(o,p,g,y,x,t,null,e)),k={top:L,right:w,bottom:F,left:A}}c=b.x,h=b.y;let M=C(t[y]);if(e.pointLabels){let t=B/p;c=E({scale:b.x,band:b.xBand},[0,p],t).scale,R(o,b.xAxis,c,null,null,g)}(e.xGrid||e.yGrid)&&S(o,c,h,g,p,e.xGrid,e.yGrid);var O,Y=function(t){return"date"===M?c(new Date(t[y])):c(t[y])},G=function(t){return h(t[x])};!0===e.showTooltip&&(O=D());var z=function(t,e){if(O){var a=u.getTooltipLabel(e);O.html(a).show()}d3.select(this).transition().duration(100).attr("opacity","0.8")},K=function(t){O&&O.style("top",t.clientY+"px").style("left",t.clientX+20+"px")},I=function(){O&&O.hide(),d3.select(this).transition().duration(100).attr("opacity","1")},j=o.append("g");if(j.attr("name","points"),j.selectAll("*").data(t).enter().append("circle").attr("dataset",0).attr("cx",Y).attr("cy",G).attr("r",function(t){return u.getPointRadius(t)}).style("fill",function(t){return u.getPointColor(t)}).style("opacity",function(t){return u.getPointOpacity(t)}).style("stroke","white").on("mouseover",z).on("mousemove",K).on("mouseleave",I).on("click",function(t,e){var a=parseInt(d3.select(this).attr("dataset"));u.onClick(this,a,e)}),!0===e.pointLabels){var N=o.append("g");N.attr("name","labels"),N.append("g").selectAll("text").data(t).enter().append("text").attr("x",function(t){var e=Y(t),a=u.getPointRadius(t);return e+a+1}).attr("y",G).attr("font-size",10).text(function(t){return u.getPointLabel(t)}).on("mouseover",z).on("mousemove",K).on("mouseleave",I).on("click",function(t){})}if(e.showRegLine){var X=m(t,y,x,d3.min(t,function(t){return t[y]}),d3.min(t,function(t){return t[x]}),c,h);s=d3.line().x(function(t){return t[0]}).y(function(t){return t[1]}),o.append("path").datum(X).attr("dataset",0).attr("d",s).attr("stroke",u.getPointColor()).attr("stroke-linecap","round").attr("stroke-width",2).on("click",function(t,e){var a=parseInt(d3.select(this).attr("dataset"));u.onClick(this,a,e)})}var V=f(o);if(V.width=1.1*(V.maxX-V.minX),V.height=1.1*(V.maxY-V.minY),V.width>i||V.height>d){var H,W=V.width-i,U=V.height-d;W>U?(H=i/V.width,1<H&&(H=1+(1-H))):U>W&&(H=d/V.height),L=(L+U/2)*H,o.attr("transform","translate("+A+","+L+") scale("+H+")")}},m=function(t,e,a,l,i,r,o){var s=t.length,n=[],d=[],c=[];t.forEach(t=>{var l={};l.x=parseFloat(r(t[e])),l.y=parseFloat(o(t[a])),l.mult=l.x*l.y,n.push(l),d.push(parseFloat(r(t[e]))),c.push(parseFloat(o(t[a])))});var h=0,u=0,g=0,p=0,f=0,k=0,A=0,w=d.length;if(w!=c.length)throw new Error("The values in xAxis and yAxis need to have same size!");if(0===w)return[[],[]];for(var C=0;C<w;C++)k=d[C],A=c[C],h+=k,u+=A,p+=k*k,g+=k*A,f++;for(var L=(f*g-h*u)/(f*p-h*h),m=u/f-L*h/f,b=[],C=0;C<w;C++)k=d[C],A=k*L+m,b.push([k,A]);return b},f=function(t){var e=l,r=0,n=l,o=0;return t.selectAll("*").each(function(){var t=javaxt.dhtml.utils.getRect(d3.select(this).node());e=i(t.left,e),r=a(t.right,r),n=i(t.top,n),o=a(t.bottom,o)}),{minX:e,maxX:r,minY:n,maxY:o}},b=javaxt.dhtml.utils.merge,k=bluewave.chart.utils.onRender,v=bluewave.chart.utils.isArray,A=bluewave.chart.utils.checkSVG,w=bluewave.chart.utils.initChart,C=bluewave.chart.utils.getType,L=bluewave.chart.utils.getScale,T=bluewave.chart.utils.drawAxes,F=bluewave.chart.utils.drawLabels,S=bluewave.chart.utils.drawGridlines,E=bluewave.chart.utils.extendScale,R=bluewave.chart.utils.reDrawAxes,D=bluewave.chart.utils.createTooltip;g()},!bluewave)var bluewave={};if(bluewave.charts||(bluewave.charts={}),bluewave.charts.LineChart=function(t,e){var r,n,o,s,c,a,d,l=Math.max,i=Math.min,h=this,u={xGrid:!1,yGrid:!1,xTicks:!0,yTicks:!0,yAxisAlign:"left",scaling:"linear",stackValues:!1,accumulateValues:!1,endTags:!1,showTooltip:!1,animationSteps:1500,labelPadding:3},g=[],p=function(){h.setConfig(e),S(t,function(t,e){r=t,n=e})};this.setConfig=function(t){e=t?L(t,u):u,h.setScaling(e.scaling)},this.setScaling=function(t){e.scaling="logarithmic"===t?"logarithmic":"linear"},this.displayEndTags=function(t){e.endTags=!(!0!==t)},this.getTooltipLabel=function(t,e){return h.getKeyLabel(t.key,t)+"<br/>"+h.getValueLabel(t.value)},this.getKeyLabel=function(t,e){var a=E(t);return"date"==a?(t instanceof Date||(t=new Date(t)),t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear()):t},this.getValueLabel=function(t,e){var a=bluewave.chart.utils.parseFloat(t);return isNaN(a)?t:T(a,2)},this.getXAxis=function(){return a},this.getYAxis=function(){return d},this.onClick=function(t,e,a){},this.clear=function(){m(),g=[]},this.update=function(){F(h,function(){f()})},this.getSVG=function(){return r},this.addLine=function(t,e,a,l){g.push({line:t,data:e,xAxis:a+"",yAxis:l+""})},this.getLayers=function(){return g},this.setLayers=function(t){g=t};var m=function(){n&&n.selectAll("*").remove()},f=function(){m();var t=e,u=g.map(t=>t.data);if(0!==u.length){var p=javaxt.dhtml.utils.getRect(r.node()),y=p.width,f=p.height,x=f,C=y;o=n.append("g"),o.attr("width",y).attr("height",f);var L=t.endTags;!0===L||!1===L||(L=1<u.length);var T=!0===t.stackValues,F=!0===t.accumulateValues,S=!0===t.showTooltip,V={};g.forEach(function(t){t.data&&t.data.forEach(function(e){var a=e[t.xAxis];V[a]=a})}),V=Object.values(V);var M=[];for(let t=0;t<g.length;t++){if(!g[t].line)continue;let e=g[t].xAxis,a=g[t].yAxis;if(e&&a){var O=B(g[t].data,e,a),Y=g[t].line.getConfig();M.push({lineConfig:Y,sumData:O})}}if(b(V,M),M.forEach(function(t){var e=t.sumData,a=t.lineConfig,l=[],r={};V.forEach(function(t){if(!r[t]){for(var a=0;a<e.length;a++)if(e[a].key==t){l.push(e[a]);break}r[t]=!0}});for(var n=0;n<l.length;n++)t.sumData[n]=l[n];var e=t.sumData;F&&e.forEach(function(t,a){var l=e[a].value;isNaN(l)&&(e[a].value=0),0<a&&(e[a].value+=e[a-1].value)});var o=a.smoothing;if(o){var s=a.smoothingValue;w(o,s,e)}}),T){if(F)M.sort(function(t,e){return t=t.sumData,t=t[t.length-1].value,e=e.sumData,e=e[e.length-1].value,e-t});else{var G=[];M.forEach(function(t){var e=t.sumData,a=0;e.forEach(t=>a+=t.value),G.push({sumValue:a,sumData:e,lineConfig:t.lineConfig})}),G.sort(function(t,e){return e.sumValue-t.sumValue}),M=[],G.forEach(t=>M.push({sumData:t.sumData,lineConfig:t.lineConfig}))}b(V,M),M.forEach(function(t){var e=t.sumData,a=[];for(V.forEach(function(t){for(var l,r=0;r<e.length;r++){var n=e[r].key,o=e[r].value;if(n==t){l=o;break}}a.push({key:t,value:l})});0<a.length;){var l=a[0].value;if(!isNaN(l))break;isNaN(l)&&a.shift()}t.sumData=a});var z=[];M.forEach(function(t,e){var a=t.sumData,l=[];a.forEach(function(t){l.push({key:t.key,value:t.value})}),a.forEach(function(t,e){var i=t.key,r=t.value;if(isNaN(r)){for(var o,s=e-1;-1<s;s--)if(o=a[s].value,!isNaN(o)){r=o;break}isNaN(r)&&(r=0)}for(var c,h,u=0;u<z.length;u++)h=z[u].sumData,h.every(function(t){var e=t.key,a=t.value;return!!(e!=i||isNaN(a))||(c=a,!1)});isNaN(c)||(r+=c),l[e].value=r}),z.push({lineConfig:t.lineConfig,sumData:l})}),M=z}var K=[],I=[];M.forEach(function(t){var e=t.sumData;V.forEach(function(t){t instanceof Date&&!T?t+="":!isNaN(t)&&!T&&(t+="");for(var a=0;a<e.length;a++){var r=e[a],n=r.key;if(n===t){for(var o,s=r.value,c=!1,h=0;h<K.length;h++)o=K[h],o.key==t&&(c=!0,o.value=i(o.value,s));c||K.push({key:t,value:s});for(var o,c=!1,h=0;h<I.length;h++)o=I[h],o.key==t&&(c=!0,o.value=l(o.value,s));c||I.push({key:t,value:s})}}})});var j=R(o,C,x,"key","value",I,K,e),N=j.margin;if(N){var X=N.left,H=N.right,W=N.top,U=N.bottom;if(L){var _=0,q=0;g.forEach(function(t,e){if(t.line){var a=t.line.getLabel();if(a||(a="Series "+(e+1)),a){var i=o.append("text").attr("dy",".35em").attr("text-anchor","start").text(a),r=i.node().getBBox();i.remove();var n=l(r.width+8,60)+5;q=r.height,_=l(n,_)}}}),H=_+5,0<q&&(W=l(q/2,W))}(0<W||0<U||0<X||0<H)&&(x-=W+U,C-=X+H,o.selectAll("*").remove(),o.attr("transform","translate("+X+","+W+")"),j=R(o,C,x,"key","value",I,K,e)),N={top:W,right:H,bottom:U,left:X}}s=j.x,c=j.y,a=j.xAxis,d=j.yAxis;var Z=function(t,e,a){var l=a.keyType;return l||(l=a.keyType=E(t.key)),"date"===l?s(new Date(t.key)):s(t.key)},J=function(t){var a=bluewave.chart.utils.parseFloat(t.value);return"logarithmic"===e.scaling?c(a+1):c(a)},Q=[];for(let t=0;t<M.length;t++)Q.push({area:null,line:null,line2:null,tag:null,point:null});var $;S&&($=P());var tt=function(t,e){if($){var a=h.getTooltipLabel(e);$.html(a).show()}},et=function(t){$&&$.style("top",t.clientY+"px").style("left",t.clientX+20+"px")},at=function(){$&&$.hide()},lt=o.append("g");lt.attr("name","fill");var it="fill-gradient-"+(Math.random()+1).toString(36).substring(7);for(let t=M.length-1;-1<t;t--){let e=M[t].sumData,a=M[t].lineConfig,l=a.fill,i=l.color,r=l.startOpacity,n=l.endOpacity,o=a.smoothing;if(0===r&&0===n)continue;var rt=function(){return o&&"spline"===o?d3.area().x(Z).y0(x).y1(J).curve(d3.curveMonotoneX):d3.area().x(Z).y0(x).y1(J)};let s=it+"-"+t;v(i,r,n,s,lt),Q[t].area=lt.append("path").datum(e).attr("fill",`url(#${s})`).attr("d",rt())}var nt=o.append("g");nt.attr("name","lines");var ot=o.append("g");ot.attr("name","thicklines");var st=o.append("g");st.attr("name","points");for(let t=0;t<M.length;t++){var O=M[t].sumData;let e=M[t].lineConfig,a=e.point,l=e.color,i=e.style,r=e.width,n=e.opacity,o=a.radius,s=a.color;var dt=e.smoothing,ct=function(){return dt&&"spline"===dt?d3.line().x(Z).y(J).curve(d3.curveMonotoneX):d3.line().x(Z).y(J)};if(Q[t].line=nt.append("path").datum(O).attr("fill","none").attr("stroke",l).attr("stroke-width",r).attr("opacity",n).attr("stroke-dasharray",function(t){return"dashed"===i?"5, 5":"dotted"===i?"0, 5":void 0}).attr("stroke-linecap",function(t){if("dotted"===i)return"round"}).attr("d",ct()),Q[t].line2=ot.append("path").datum(O).attr("dataset",t).attr("fill","none").attr("stroke","#ff0000").attr("stroke-width",10).attr("opacity",0).attr("d",ct()).on("click",function(t,e){var a=parseInt(d3.select(this).attr("dataset"));A(Q[a]),h.onClick(this,a,e)}),o&&(Q[t].point=st.selectAll("points").data(O).enter().append("circle").attr("dataset",t).attr("fill",s).attr("stroke","none").attr("cx",Z).attr("cy",J).attr("r",o).on("click",function(t,e){var a=parseInt(d3.select(this).attr("dataset"));A(Q[a]),h.onClick(this,a,e)})),($&&(Q[t].point=st.selectAll("points").data(O).enter().append("circle").attr("dataset",t).attr("fill","#ff0000").attr("stroke","none").attr("opacity",0).attr("cx",Z).attr("cy",J).attr("r",10).on("mouseover",tt).on("mousemove",et).on("mouseleave",at)),L)){var ht=e.label;ht||(ht="Series "+(t+1));var ut=Q[t].line2;Q[t].tag=k(O,l,ht,ut)}}var gt=bluewave.chart.utils.parseFloat(t.animationSteps);for(let t=0;t<M.length;t++){var dt=M[t].lineConfig.smoothing;if(dt&&"spline"===dt){gt=0;break}}if(!isNaN(gt)&&50<gt){let t=nt.selectAll("path"),a=st.selectAll("circle"),l=lt.selectAll("path"),i=d3.min(K,t=>bluewave.chart.utils.parseFloat(t.value)),r="logarithmic"===e.scaling?c(i):c(0);var pt=[];t.each(function(){pt.push(d3.select(this).attr("d"))});var yt=[];if(l.each(function(){yt.push(d3.select(this).attr("d"))}),t.attr("d",d3.line().x(Z).y(r)),a.attr("cx",Z).attr("cy",r),l.attr("d",d3.area().x(Z).y0(x).y1(r)),t.transition().duration(gt).attr("d",function(t,e){return pt[e]}),a.transition().duration(gt).attr("cx",Z).attr("cy",J),l.transition().duration(gt).attr("d",function(t,e){return yt[e]}),L)for(var mt=0;mt<Q.length;mt++){var ft=Q[mt].tag.poly,xt=Q[mt].tag.text,bt=ft.attr("transform"),kt=xt.attr("transform"),vt=bt.slice(10).split(",")[0],At=kt.slice(10).split(",")[0];ft.attr("transform","translate("+vt+","+(x-9.6)+")"),xt.attr("transform","translate("+At+","+x+")"),ft.transition().duration(gt).attr("transform",bt),xt.transition().duration(gt).attr("transform",kt)}}if(t.xGrid||t.yGrid){var wt=!1;!0===t.xGrid&&(wt=bluewave.chart.utils.parseFloat(t.xTicks),isNaN(wt)&&(wt=!0));var Ct=!1;!0===t.yGrid&&(Ct=bluewave.chart.utils.parseFloat(t.yTicks),isNaN(Ct)&&(Ct=!0)),D(o,s,c,x,C,wt,Ct)}}},b=function(t,e){var l=E(t),r={};e.forEach(function(t,e){var a=t.sumData,i="none",n=0,o=0,s=0;if(2>a.length);else{for(var d=0;d<a.length-1;d++){var c=a[d].key,h=a[d+1].key;if("date"==l)c=new Date(c).getTime(),h=new Date(h).getTime(),h>=c&&n++,h<=c&&o++;else if("number"==l||"currency"==l)c=bluewave.chart.utils.parseFloat(c),h=bluewave.chart.utils.parseFloat(h),h>c&&n++,h<c&&o++,h==c&&s++;else{var u=c.localeCompare(h);0>u&&n++,0<u&&o++,0==u&&s++}}n+s==a.length-1&&(i="asc"),o+s==a.length-1&&(i="desc");var g=r[i];g||(g=[],r[i]=g),g.push(e)}});var n=Object.keys(r),o=1==n.length?n[0]:null;"date"==l&&(o="asc"),o&&t.sort(function(t,e){return"number"==l||"currency"==l?"asc"==o?bluewave.chart.utils.parseFloat(t)-bluewave.chart.utils.parseFloat(e):bluewave.chart.utils.parseFloat(e)-bluewave.chart.utils.parseFloat(t):"date"==l?(t instanceof Date||(t=new Date(t)),e instanceof Date||(e=new Date(e)),t.getTime()-e.getTime()):"asc"==o?t.localeCompare(e):e.localeCompare(t)})},k=function(t,i,r,n){var d=t[t.length-1],u=d.key,g=d.value,p=E(t[0].key);if("date"===p)var y=s(new Date(u));else var y=s(u);var m="logarithmic"===e.scaling?c(g+1):c(g),f=o.append("text").attr("dy",".35em").attr("text-anchor","start").text(r),x=f.node().getBBox();f.remove();var b=l(x.width+8,60),k=x.height,h=k/2,a=[[0,0],[b,0],[b,k],[0,k],[-h,h]],v=o.append("polygon").attr("points",a.join(" ")).attr("transform","translate("+(y+h)+","+(m-h)+")").style("fill",i).on("click",function(t,e){n.dispatch("click")}),A=o.append("text").attr("transform","translate("+(y+h+4)+","+m+")").attr("dy",".35em").attr("text-anchor","start").style("fill","#fff").text(r).on("click",function(t,e){n.dispatch("click")});return{poly:v,text:A}},v=function(t,e,a,l,i){null==e&&(e=0),null==a&&(a=0),i.append("defs").append("linearGradient").attr("id",l).attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%").selectAll("stop").data([{offset:"0%",color:t,opacity:e},{offset:"100%",color:t,opacity:a}]).enter().append("stop").attr("offset",t=>t.offset).attr("stop-color",t=>t.color).attr("stop-opacity",t=>t.opacity)},A=function(t){if(t){t.line.raise(),t.line2.raise(),t.point&&t.point.raise();var e=t.tag;if(e){var a=e.poly.node().parentNode,l=e.poly.node().cloneNode(!0),i=e.text.node().cloneNode(!0);e.poly.remove(),e.text.remove(),a.appendChild(l),a.appendChild(i),t.tag.poly=d3.select(l),t.tag.text=d3.select(i)}}},w=function(t,e,a){if("movingAverage"===t){if(!isNaN(e)&&0<e){function t(t,e){let a=[t[0]],l=0;for(let r=1;r<e;r++)l+=t[r],a.push(l/r);for(let l,r=e;r<t.length;r++)l=d3.mean(t.slice(r-e/2,r+e/2)),a.push(l);return a}var l=a.map(t=>t.value);let r=t(l,e);a.forEach(function(t,e){t.value=isNaN(r[e])?0:r[e]})}}else if("kde"===t){var l=a.map(t=>t.value),r=l.length,n=d3.extent(l),o=n[0],s=n[1],c=l.reduce((t,e)=>t+e,0),h=(s-o)/r;h=Math.round(h);for(var u=[],g=0;g<l.length;g++)for(var d=0;d<l[g];d++)u.push(g+.5),d+=h;for(var p,y=[],m=C(e),g=0;g<l.length;g++)p=d3.mean(u,function(t){return m(g-t)}),y.push([g,p]);a.forEach(function(t,e){t.value=y[e][1]*c})}},C=function(t){return e=>1>=Math.abs(e/=t)?.75*(1-e*e)/t:0},L=javaxt.dhtml.utils.merge,T=javaxt.dhtml.utils.round,F=bluewave.chart.utils.checkSVG,S=bluewave.chart.utils.initChart,E=bluewave.chart.utils.getType,R=bluewave.chart.utils.drawAxes,D=bluewave.chart.utils.drawGridlines,B=bluewave.chart.utils.createKeyValueDataset,P=bluewave.chart.utils.createTooltip;p()},!bluewave)var bluewave={};if(bluewave.charts||(bluewave.charts={}),bluewave.charts.SankeyChart=function(t,a){var i,r,n,l=Math.max,o=this,e={margin:{top:10,right:10,bottom:10,left:10},links:{color:"#ccc",opacity:.3}},s=[],d=[],c=d3.scaleOrdinal(d3.schemeCategory10),h=function(){o.setConfig(a),m(t,function(t,e){i=t,r=e})};this.setConfig=function(t){a=t?p(t,e):e},this.getChart=function(){return n},this.getNodeColor=function(t){return c(t.name.replace(/ .*/,""))},this.getNodeLabel=function(t){return t.name},this.addNode=function(t,e){if(t){var a;return a=t.name?t:{name:t,group:e},s.push(a),a}},this.addLink=function(t,e,a){if(t&&e){t.name&&(t=t.name),e.name&&(e=e.name);var l={source:t,target:e,value:a};return d.push(l),l}},this.clear=function(){u(),s=[],d=[]},this.update=function(t,e){o.setConfig(t),e&&(o.clear(),e.nodes&&(s=e.nodes),e.links&&(d=e.links)),y(o,function(){var t=i.node().parentNode;g(t)})},this.getSVG=function(){return i};var u=function(){r&&r.selectAll("*").remove()},g=function(t){u();var e=t.offsetWidth,i=t.offsetHeight;n=r.append("g"),n.attr("name","sankey").attr("width",e).attr("height",i);var c=d3.sankey().nodeId(t=>t.name).nodeWidth(20).nodePadding(20).iterations([6]).size([e,i]);let h=c({nodes:s,links:d});var g=c.size(),e=g[0],p=d3.format(",.0f"),y=function(t,e){var l;return l="source"===a.links.color?t.source.color:a.links.color,f(l,"white",1-e)},m=n.append("g");m.attr("name","links");var x=m.selectAll("*").data(h.links).enter().append("path").attr("class","sankey-link").attr("d",d3.sankeyLinkHorizontal()).attr("stroke-width",function(t){return l(t.width,1)}).on("mouseover",function(t,e){var l=Math.min(1,1.3*a.links.opacity),i=y(e,l);d3.select(this).style("stroke",i)}).on("mouseout",function(t,e){var l=y(e,a.links.opacity);d3.select(this).style("stroke",l)}),b=n.append("g");b.attr("name","nodes");var k=b.selectAll("*").data(h.nodes).enter().append("g").attr("class","sankey-node");k.append("rect").attr("x",function(t){return t.x0}).attr("y",function(t){return t.y0}).attr("height",function(t){return l(t.y1-t.y0,1)}).attr("width",c.nodeWidth()).style("fill",function(t){return t.color=o.getNodeColor(t)}).style("stroke",function(t){return d3.rgb(t.color).darker(2)}).append("title").text(function(t){return t.name+"\n"+p(t.value)}),x.each(function(){var t=d3.select(this);t.style("stroke",function(t){return y(t,a.links.opacity)})}),x.append("title").text(function(t){return t.source.name+" \u2192 "+t.target.name+"\n"+p(t.value)}),k.append("text").attr("x",function(t){return t.x0-6}).attr("y",function(t){return(t.y1+t.y0)/2}).attr("dy","0.35em").attr("text-anchor","end").text(function(t){return o.getNodeLabel(t)}).filter(function(t){return t.x0<e/2}).attr("x",function(t){return t.x1+6}).attr("text-anchor","start")},p=javaxt.dhtml.utils.merge,y=bluewave.chart.utils.checkSVG,m=bluewave.chart.utils.initChart,f=bluewave.chart.utils.mixColors;h()},!bluewave)var bluewave={};if(bluewave.chart||(bluewave.chart={}),bluewave.chart.Line=function(t){var e=this,a={color:"#6699CC",opacity:1,width:1,style:"solid",fill:{color:"#6699CC",startOpacity:0,endOpacity:0},point:{color:"#6699CC",radius:0},label:"",smoothing:"none",smoothingValue:0},l=function(){if(!t)return void(t=a);var l=t;t=a,e.setConfig(l)};this.setColor=function(e){e=i(e),e&&(t.color=e)},this.setOpacity=function(e){e=r(e),isNaN(e)||(t.opacity=e)},this.setWidth=function(e){e=parseFloat(e),!isNaN(e)&&0<e&&(t.width=e)},this.setStyle=function(e){e&&(e=(e+"").toLowerCase(),("solid"===e||"dashed"===e||"dotted"===e)&&(t.style=e))},this.setFill=function(e){if(!e)delete t.fill;else{var a=i(e.color);a&&(t.fill.color=a);var l=r(e.startOpacity);isNaN(l)||(t.fill.startOpacity=l);var l=r(e.endOpacity);isNaN(l)||(t.fill.endOpacity=l)}},this.setPoint=function(e){if(!e)delete t.point;else{var a=i(e.color);a&&(t.point.color=a);var l=parseFloat(e.radius);!isNaN(l)&&0<l&&(t.point.radius=l)}},this.setLabel=function(e){t.label=e},this.setSmoothing=function(e){if(e){switch(e=(e+"").toLowerCase(),e){case"spline":case"simple spline":e="spline";break;case"moving average":case"movingaverage":e="movingAverage";break;case"kernel density estimation":case"kde":e="kde";break;case"curvenatural":e="curveNatural";break;default:e="none"}t.smoothing=e}},this.setSmoothingValue=function(e){e=parseFloat(e),isNaN(e)||0>e||(t.smoothingValue=e)},this.getConfig=function(){return t},this.setConfig=function(t){for(var a in t)if(t.hasOwnProperty(a)){var l="set"+a.substring(0,1).toUpperCase()+a.substring(1);e[l]&&e[l].apply(e,[t[a]])}},this.getColor=()=>t.color,this.getWidth=()=>t.width,this.getStyle=()=>t.style,this.getFill=()=>t.fill,this.getPoint=()=>t.point,this.getLabel=()=>t.label,this.getSmoothing=()=>t.smoothing,this.getSmoothingValue=()=>t.smoothingValue,this.clone=function(){let e=Object.assign({},t);return new bluewave.chart.Line(e)};var i=function(t){return t},r=function(t){return t=parseFloat(t),isNaN(t)?null:0>t||1<t?null:t};l()},!bluewave)var bluewave={};if(bluewave.charts||(bluewave.charts={}),bluewave.charts.CalendarChart=function(t,e){var l,r,n,a=Math.max,o=this,i={dayLabel:!0,yearLabel:!0,date:"date",value:"value",weekday:"sunday",colors:["#fff","#ebf5dc","#cbe9a5","#2a671a"],numClasses:10,boundaryColor:"#fff",showTooltip:!1},s=function(){o.setConfig(e),u(t,function(t,e){l=t,r=e})};this.setConfig=function(t){e=t?c(t,i):i},this.onClick=function(t,e){},this.getCell=function(t){t=new Date(t);var e=t.getFullYear(),a=t.getMonth(),l=t.getDate(),i=null;return n.selectAll("rect").each(function(t){var r=t.getFullYear(),n=t.getMonth(),o=t.getDate();r===e&&n===a&&o===l&&(i=this)}),i},this.getTooltipLabel=function(t){return d3.utcFormat("%m/%d/%Y")(t.date)+"<br/>"+d3.format(",")(t.value)},this.clear=function(){r&&r.selectAll("*").remove()},this.update=function(t,a){o.clear(),1<arguments.length?e=c(t,i):a=arguments[0],h(o,function(){d(a)})},this.getSVG=function(){return l};var d=function(t){o.clear();var s=e,d=javaxt.dhtml.utils.getRect(l.node()),c=d.width,h=d.height;n=r.append("g"),n.attr("width",c).attr("height",h);var u=e.weekday,m=t=>"SMTWTFS"[t];const f="sunday"===u?t=>t:t=>(t+6)%7,x="sunday"===u?d3.utcSunday:d3.utcMonday,b="weekday"===u?5:7;t.forEach(t=>{var a=t[e.date],l=t[e.value];t[e.date]=new Date(a),t[e.value]=bluewave.chart.utils.parseFloat(l)}),t.sort(function(t,a){return a[e.date].getTime()-t[e.date].getTime()});var k=[],v=[],A={},w={};t.forEach(t=>{var a=t[e.date],l=t[e.value];k.push(a),v.push(l);var i=a.getUTCFullYear();A[i+""]=i;var r=x.count(d3.utcYear(a),a);w[r+""]=parseInt(r)}),A=Object.values(A),A.sort(function(t,e){return e-t});for(var C=0,L=d3.extent(Object.values(w)),T=0;T<=L[1];T++)C++;var F=0,S=c;s.dayLabel&&(F=15),s.yearLabel&&(F=a(40,F));var E,R=Math.floor((S-F)/C),D=y(v,e.numClasses),B=p(D.length+1,e.colors),P=function(t){for(var e=0;e<D.length-1;e++){var a=D[e],l=D[e+1],r=B[e];if(t>=a&&t<l)return r;if(t==D[D.length-1])return B[B.length-1]}};!0===e.showTooltip&&(E=g());var V=function(t,e){if(E){var a=z.nodes().indexOf(this),l=o.getTooltipLabel({date:e,value:v[a]});E.html(l).show()}d3.select(this).transition().duration(100).attr("opacity","0.8")},M=function(t){E&&E.style("top",t.clientY+"px").style("left",t.clientX+20+"px")},O=function(){E&&E.hide(),d3.select(this).transition().duration(100).attr("opacity","1")};const Y=R*(b+2);var G=n.selectAll("*").data(A).join("g").attr("transform",(t,e)=>`translate(${F-.5},${Y*e+1.5*R})`);s.yearLabel&&G.append("text").attr("class","chart-axis-label").attr("x",-5).attr("y",-5).attr("text-anchor","end").text(t=>t),s.dayLabel&&G.append("g").attr("class","day label").attr("text-anchor","middle").selectAll("text").data(function(t){var e=d3.range(7);return e.forEach(function(a,l){e[l]={day:a,year:t}}),e}).join("text").attr("x",-10).attr("y",function(t){return(f(t.day)+.5)*R}).attr("dy","0.31em").text(function(t){return m(t.day)});var z=G.append("g").selectAll("*").data(function(t){var e=[];return k.forEach(function(a){a.getUTCFullYear()===t&&e.push(a)}),e}).join("rect").attr("width",R-1).attr("height",R-1).attr("x",t=>x.count(d3.utcYear(t),t)*R+.5).attr("y",t=>f(t.getUTCDay())*R+.5).attr("fill",function(t,a){var l=v[a],i=P(l);return i===e.colors[0]&&0<l&&(i=B[1]),i}).on("mouseover",V).on("mousemove",M).on("mouseleave",O).on("click",function(t,e){var a=z.nodes().indexOf(this);o.onClick(this,{date:e,value:v[a]})}),K=G.append("g").selectAll("g").data(function(t){var e,a;return k.forEach(function(l){l.getUTCFullYear()===t&&(!a&&(a=l),e=l)}),e=new Date(e.getTime()),a=new Date(a.getTime()),e.setMonth(e.getMonth()-1),a.setMonth(a.getMonth()+1),d3.utcMonths(e,a)}).join("g");K.filter((t,e)=>e).append("path").attr("fill","none").attr("stroke",e.boundaryColor).attr("stroke-width",3).attr("d",function(t){const e=a(0,Math.min(b,f(t.getUTCDay()))),l=x.count(d3.utcYear(t),t);return`${0===e?`M${l*R},0`:e===b?`M${(l+1)*R},0`:`M${(l+1)*R},0V${e*R}H${l*R}`}V${b*R}`});var I={};K.append("text").attr("class","month label").attr("x",t=>x.count(d3.utcYear(t),x.ceil(t))*R+2).attr("y",-5).text(function(t){var e=d3.utcFormat("%b")(t),a=d3.utcFormat("%Y")(t),l=a+"-"+e,i=!1;if(k.every(function(t){var e=d3.utcFormat("%b")(t),a=d3.utcFormat("%Y")(t),r=a+"-"+e;return r!==l||(i=!0,!1)}),i&&!I[l])return I[l]=!0,e})},c=javaxt.dhtml.utils.merge,h=bluewave.chart.utils.checkSVG,u=bluewave.chart.utils.initChart,g=bluewave.chart.utils.createTooltip,p=bluewave.chart.utils.getColorRange,y=bluewave.chart.utils.getNaturalBreaks;s()},!bluewave)var bluewave={};bluewave.charts||(bluewave.charts={}),bluewave.charts.MapChart=function(t,e){var i,r,n,o,s,d,c,h,a=Math.abs,l=Math.PI,u=this,g={style:{backgroundColor:"#fff"}},m=!1,f=[],x={},b="Mercator",k=function(){e=B(e,g),M(t,function(t,e){i=t,r=e,i.call(d3.zoom().scaleExtent([1,1]).on("zoom",w)),i.on("click",function(t){var e=u.getProjection();if(e){var a=d3.pointer(t),l=e.invert(a);u.onMouseClick(l[1],l[0],t)}})})};this.addPoints=function(t,e){f.push({type:"points",features:t,config:e})},this.addLines=function(t,e){f.push({type:"lines",features:t,config:e})},this.addPolygons=function(t,e){f.push({type:"polygons",features:t,config:e})},this.addLabels=function(t,e){f.push({type:"labels",features:t,config:e})},this.addGrid=function(t){f.push({type:"grid",features:null,config:t})},this.setBackgroundColor=function(t){e.style.backgroundColor=t,t&&h&&h.attr("fill",t)},this.getProjection=function(){return n},this.setProjection=function(t){b=t,n=d3["geo"+t]()},this.getCentroid=function(t){if(!t)return null;n||u.setProjection("Mercator");var e=d3.geoPath(n);if(P(t)){var a="Point";P(t[0])&&(a="Polygon"),t={type:"Feature",geometry:{type:a,coordinates:t}}}var l=e.centroid(t);return l=n.invert(l),l},this.onRecenter=function(t,e){},this.onRedraw=function(){},this.onMouseClick=function(t,a,l){},this.enablePan=function(){m=!1},this.disablePan=function(){m=!0},this.clear=function(){v(),n=o=s=d=c=null,f=[]};var v=function(){r&&(r.node().innerHTML="",r.attr("transform",null))};this.resize=function(){r},this.setCenter=function(e,a){var i=t.offsetWidth,r=t.offsetHeight;a||(a=i/2/l),n.rotate([-e[0],0]).center([0,e[1]]).scale(a).translate([i/2,r/2])},this.getMidPoint=function(t,e,a){n||u.setProjection("Mercator"),isNaN(e)&&(e=0),a="south"===a?1:-1;var l=t.slice();l[0]=n(l[0]),l[1]=n(l[1]),0>l[1][0]-l[0][0]&&l.reverse();var i=(l[0][0]+l[1][0])/2,r=(l[0][1]+l[1][1])/2,o=l[1][0]-l[0][0],s=l[1][1]-l[0][1],d=[-s*e*a,o*e*a],c=[d[0]+i,d[1]+r];return c=n.invert(c),c},this.update=function(t){v(),V(u,function(e){var a=e.node().parentNode;A(a),t&&t()})},this.getSVG=function(){return i};var A=function(t){v();var a=t.offsetWidth,i=t.offsetHeight,r=parseFloat(e.lat),h=parseFloat(e.lon);return isNaN(r)&&(r=0),isNaN(h)&&(h=0),n||u.setProjection("Mercator"),"AlbersUsa"===b?(n.translate([a/2,i/2]),void L()):void(n.scale(a/2/l).rotate([-h,0]).center([0,r]).translate([a/2,i/2]),o=n.scale(),s=n.translate(),d=n.rotate(),c=n.center(),C(x),L())},w=function(a){var e=u.getProjection();if(e&&!m){var l=javaxt.dhtml.utils.getRect(i.node()),r=l.width,n=l.height,o=a.transform,t=r/2-o.x,h=n/2-o.y,g=e.invert([t,h]),p=d3.scaleLinear().domain([0,n]).range([0,180]),y=d3.scaleLinear().domain([0,r]).range([0,360]),f=s[0]-o.invertX(s[0]),x=s[1]-o.invertY(s[1]),b=p(x)/2+c[1],k=y(f)+d[0];e.rotate([k,d[1],d[2]]),e.center([0,b]),L(),u.onRecenter(g[1],g[0])}};this.getExtent=function(){var t=u.getProjection();if(t){var e=javaxt.dhtml.utils.getRect(i.node()),a=e.width,l=e.height,r=t.invert([0,0]),n=t.invert([a,l]);return{left:r[0],right:n[0],top:r[1],bottom:n[1]}}},this.setExtent=function(t,e,a){x.upperLeft=t,x.lowerRight=e,n?(C(x),a&&a()):u.update(function(){C(x),a&&a()})};var C=function(t,e=10){if(!(0>e||isNaN(e))&&n&&"AlbersUsa"!==b&&t.upperLeft&&t.lowerRight){var l=t.upperLeft,r=t.lowerRight,o=n.scale(),s=u.getExtent(),d=javaxt.dhtml.utils.getRect(i.node()),c=d.width,g=d.height;"Albers"==b&&n.parallels([r[1]+a(r[1]*(1/6)),l[1]-a(l[1]*(1/6))]);var h=n([s.left,s.top]),p=n([s.right,s.bottom]),y=a(h[0]-p[0]),m=a(h[1]-p[1]);n(l)[0]>n(r)[0]&&n.rotate([-l[0]-180,0]);var f,x=n(l),k=n(r),v=a(x[0]-k[0]);f=v/y,n.scale(o/f),x=n(l),k=n(r);var A=[x[0]+c/2,x[1]+g/2],w=n.invert(A);n.rotate([-w[0],0]).center([0,w[1]]),w=u.getMidPoint([l,r]);var L=u.getExtent(),T=a(r[1]-L.bottom);if(r[1]<L.bottom){let t=L.top-L.bottom,e=T/t;e++;let a=n.scale();n.scale(a/e)}n.rotate([-w[0],0]).center([0,w[1]]),C(t,--e)}},L=function(){v();var t=r.append("g");t.attr("name","background"),h=t.append("rect").attr("width","100%").attr("height","100%"),e.style.backgroundColor&&h.attr("fill",e.style.backgroundColor);var a=r.append("g");a.attr("name","layers");var l=d3.geoPath(n);f.forEach(function(t,e){t.config||(t.config={});var i=t.config.name;i||(i="layer"+e);var r=a.append("g");r.attr("name",i),"points"===t.type?T(t,r,l):"lines"===t.type&&F(t,r,l),"polygons"===t.type?E(t,r,l):"labels"===t.type?R(t,r,l):"grid"===t.type&&S(t,r,l)})},T=function(t,e,a){t.config||(t.config={});var l=t.config,i=t.config.style;i||(i={});var r;!0===l.showTooltip&&(r=O());var o=!1;(r||l.onClick)&&(o=!0);var s=i.fill;s||(s="red");var d=i.opacity;d||(d=1);var c=parseInt(i.radius);isNaN(c)&&(c=3),0>c&&(c=1);var h=parseFloat(i.outlineWidth);isNaN(h)&&(h=1);var g=i.outlineColor,p=e.selectAll("*").data(t.features).enter().append("circle").attr("r",function(t){return"function"==typeof i.radius?i.radius(t):c}).attr("transform",function(t){var e=D(t);return e&&(e=n(e)),e?"translate("+e+")":""}).attr("opacity",d).style("fill",s).attr("stroke",g).attr("stroke-width",h).attr("stroke-opacity",d).on("click",function(a,e,i,r){l.onClick&&l.onClick.apply(u,[{feature:e,element:r[i],layer:t,event:a}])});t.elements=p},F=function(t,e,a){t.config||(t.config={});var l=t.config.style;l||(l={});var i=parseInt(l.width);isNaN(i)&&(i=1);var r=l.lineStyle;r||(r="solid");var o=l.smoothing;o&&"none"!==o||(o="curveLinear");var s=l.color;s||(s="red");var d=l.opacity;d||(d=1);var c=e.selectAll("*").data(t.features).enter().append("path").attr("d",function(t){var e=d3.line().curve(d3[o]),a=t.map(t=>n(t));return e(a)}).attr("fill","none").attr("opacity",d).style("stroke",s).style("stroke-width",i).attr("stroke-dasharray",function(t){if("dashed"===r)return"10, 10";return"dotted"===r?"0, 10":void 0}).attr("stroke-linecap",function(t){if("dotted"===r)return"round"});t.elements=c},S=function(t,e,a){t.config||(t.config={});var l=t.config.style;l||(l={});var i=parseInt(l.width);isNaN(i)&&(i=.5);var r=l.lineStyle;r||(r="solid");var n=l.color;n||(n="gray");var o=l.opacity;o||(o=.5);var s=l.longSteps;s||(s=10);var d=l.latSteps;d||(d=10);var c=d3.geoGraticule().step([s,d]),h=e.selectAll("*").data([c()]).enter().append("path").attr("d",a).attr("fill","none").attr("opacity",o).style("stroke",n).style("stroke-width",i).attr("stroke-dasharray",function(t){if("dashed"===r)return"10, 10";return"dotted"===r?"0, 10":void 0}).attr("stroke-linecap",function(t){if("dotted"===r)return"round"});t.elements=h},E=function(t,e,a){t.config||(t.config={});var l=t.config,i=t.config.style;i||(i={});var r,n;!0===l.showTooltip&&(n=l.getTooltipLabel,n&&(r=O()));var o=!1;(r||l.onClick)&&(o=!0);var s=function(a,e){if(r){var i=n(e);r.html(i).show()}var s=d3.select(this);o&&(s.transition().duration(100),s.attr("opacity","0.8")),l.onMouseOver&&l.onMouseOver.apply(u,[{feature:e,element:s,layer:t}])},d=function(t){r&&r.style("top",t.clientY+"px").style("left",t.clientX+20+"px")},c=function(a,e){r&&r.style("opacity",0).style("display","none");var i=d3.select(this);o&&(i.transition().duration(100),i.attr("opacity","1")),l.onMouseLeave&&l.onMouseLeave.apply(u,[{feature:e,element:i,layer:t}])},h=i.fill;h||(h="#DEDDE0");var g=i.stroke;g||(g="#fff");var p=e.selectAll("*").data(t.features).enter().append("path").attr("d",a).attr("fill",function(t){return"function"==typeof i.fill?i.fill(t):h}).attr("stroke",g).style("stroke-width",.4).on("mouseover",s).on("mousemove",d).on("mouseleave",c).on("click",function(a,e,i,r){l.onClick&&l.onClick.apply(u,[{feature:e,element:r[i],layer:t,event:a}])});t.elements=p},R=function(t,e,a){t.config||(t.config={});var l=t.config,i=t.config.style;i||(i={});var r=parseFloat(i.fontSize);isNaN(r)&&(r=12);var o=i.color;o||(o=i.fill),o||(o="#000");var s=i.textAlign;s||(s="left");var d=e.selectAll("text").data(t.features).enter().append("text").attr("transform",function(t){var e=D(t);if(e){e=n(e);var a=e[0],l=e[1];return isNaN(a)||isNaN(l)?"":`translate(  ${a}, ${l}  )`}return""}).attr("font-size",r).attr("text-anchor",()=>"center"==s?"middle":s).style("fill",o).text(e=>e.properties&&t.config.label?e.properties[t.config.label]:"").on("click",function(e,a,i){l.onClick&&l.onClick.apply(u,[{feature:e,element:i[a],layer:t}])});t.elements=d},D=function(t){if(P(t))return t;return t.geometry?t.geometry.coordinates:null},B=javaxt.dhtml.utils.merge,P=bluewave.chart.utils.isArray,V=bluewave.chart.utils.checkSVG,M=bluewave.chart.utils.initChart,O=bluewave.chart.utils.createTooltip;k()};
